(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 9.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       157,          7]
NotebookDataLength[     16685,        375]
NotebookOptionsPosition[     14523,        325]
NotebookOutlinePosition[     14994,        344]
CellTagsIndexPosition[     14951,        341]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Load Libraries and Create The Model", "Chapter",
 CellChangeTimes->{{3.7997650301634903`*^9, 3.7997650458841677`*^9}, {
  3.799765087681326*^9, 
  3.799765091782607*^9}},ExpressionUUID->"0996b115-3cd0-4938-889e-\
3a404bbf8e35"],

Cell[CellGroupData[{

Cell["Load Libraries", "Section",
 CellChangeTimes->{{3.7202317459113274`*^9, 3.720231749536362*^9}, {
  3.7501602489451323`*^9, 3.7501602505387363`*^9}, {3.7501649619556475`*^9, 
  3.7501649626899853`*^9}},ExpressionUUID->"d35a9d37-fa1d-438f-ab0a-\
d88a97e4b5c8"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<../../\>\""}], 
     "}"}], "]"}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"<<", " ", "\"\<SIMple`\>\""}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetDirectory", "[", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", " ", "\"\<../\>\""}], 
     "}"}], "]"}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"<<", " ", "\"\<KneedWalker`\>\""}], ";"}]}], "Input",
 CellChangeTimes->{{3.7501604927563725`*^9, 3.750160493084455*^9}, {
  3.7501643417435856`*^9, 3.7501643431809635`*^9}, {3.7501643756316943`*^9, 
  3.750164402317227*^9}, {3.750164965252291*^9, 3.7501650145821524`*^9}, {
  3.7501668851541266`*^9, 3.7501668997468395`*^9}, {3.750176807214397*^9, 
  3.75017682674419*^9}, {3.7505077987339153`*^9, 3.7505078002650537`*^9}, {
  3.7505083024017844`*^9, 3.750508303901678*^9}, {3.750538194617021*^9, 
  3.750538199194807*^9}, {3.75069666710338*^9, 3.7506966686813917`*^9}, {
  3.8004458364676437`*^9, 
  3.800445838656146*^9}},ExpressionUUID->"1247f3b0-bee8-49a6-b6ae-\
6c5a298ebf81"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Compile Biped", "Section",
 CellChangeTimes->{{3.7202317459113274`*^9, 
  3.720231749536362*^9}},ExpressionUUID->"10a1cf1f-17e4-4abb-83c3-\
92e65bd10885"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"n", " ", "=", " ", "1"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"KneedWalker", "[", "n", "]"}], ";"}], " ", "//", " ", 
  "AbsoluteTiming"}]}], "Input",
 CellChangeTimes->{
  3.762018089116849*^9, {3.7892306603701897`*^9, 3.789230665854866*^9}, 
   3.789386251217063*^9, {3.7893865511830797`*^9, 3.789386576495982*^9}, {
   3.7893894531217747`*^9, 3.789389453231635*^9}, {3.789389704087123*^9, 
   3.78938970418828*^9}, {3.791167881865913*^9, 3.791167882113586*^9}, 
   3.7911679131733637`*^9, {3.7911950006595783`*^9, 3.7911950010569077`*^9}, 
   3.799793292167459*^9},
 CellLabel->"In[98]:=",ExpressionUUID->"68967f29-1198-49a4-8605-9f212a90c743"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Load Gaits", "Section",
 CellChangeTimes->{{3.7202305677320776`*^9, 3.720230571169626*^9}, {
   3.741532498288093*^9, 3.7415325025377827`*^9}, {3.7501664650150137`*^9, 
   3.750166469545931*^9}, 3.799764324808779*^9, {3.800445850368044*^9, 
   3.8004458515891247`*^9}},ExpressionUUID->"4ad0f40f-3a07-437c-9e58-\
475fb805f335"],

Cell[BoxData[
 RowBox[{
  RowBox[{"BLGetFrom", "[", 
   RowBox[{"\"\<Here\>\"", ",", " ", "\"\<kw.mx\>\""}], "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.737288159391704*^9, 3.7372881643601446`*^9}, {
   3.737288213122402*^9, 3.737288238074687*^9}, {3.737288630600859*^9, 
   3.7372886306633544`*^9}, {3.737295148650228*^9, 3.737295150837597*^9}, {
   3.7399314682516994`*^9, 3.739931470734621*^9}, {3.741024465562008*^9, 
   3.7410244668683367`*^9}, {3.750173430040456*^9, 3.7501734304154425`*^9}, 
   3.7997816874146147`*^9, 3.799784953474319*^9, {3.799786509121731*^9, 
   3.7997865121108103`*^9}, {3.7997885078982*^9, 3.799788508410679*^9}, 
   3.79979335053719*^9},
 CellLabel->
  "In[101]:=",ExpressionUUID->"cc4640ab-d293-488e-b8d2-fdc5e6cfa8cd"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Outputs for Paper and Node.js", "Chapter",
 CellChangeTimes->{{3.7997650301634903`*^9, 3.7997650458841677`*^9}, {
   3.799765087681326*^9, 3.799765091782607*^9}, 3.79976902871459*^9, {
   3.799769111169693*^9, 3.799769111817445*^9}, {3.799769188967784*^9, 
   3.799769213962784*^9}},ExpressionUUID->"f9a0dd6e-2ce8-4c9f-a2b1-\
efd897a2a24b"],

Cell["\<\
Refer to CompassGait/Outputs.nb for detailed description of this code.\
\>", "Text",
 CellChangeTimes->{{3.799781893425097*^9, 3.7997819712417727`*^9}, {
  3.8004458660564013`*^9, 
  3.800445869446231*^9}},ExpressionUUID->"895df482-afa2-4f67-8b8a-\
d7e62c3d5fae"],

Cell[CellGroupData[{

Cell["Drawings for Paper", "Section",
 InitializationCell->True,
 CellChangeTimes->{{3.593429863957615*^9, 3.5934298658013515`*^9}, 
   3.593430810778412*^9, 3.708167171380418*^9, {3.710781230070614*^9, 
   3.7107812485083423`*^9}, {3.7107854886192164`*^9, 
   3.7107855078694816`*^9}, {3.7107856220274305`*^9, 3.710785626683711*^9}, {
   3.720021912558138*^9, 3.7200219642461476`*^9}, {3.7372660863442917`*^9, 
   3.737266089312806*^9}, {3.741451452539322*^9, 3.7414514566483793`*^9}, {
   3.750514817078146*^9, 
   3.750514819637392*^9}},ExpressionUUID->"bf4c0e89-2d52-4e94-8c5b-\
3e7e3237c629"],

Cell[CellGroupData[{

Cell["Gait in Figure 6(c)", "Subsection",
 CellChangeTimes->{{3.7415221785581636`*^9, 3.7415221837765245`*^9}, {
   3.7415320474954185`*^9, 3.741532054791753*^9}, {3.74508515603436*^9, 
   3.7450851566905622`*^9}, {3.750691662626638*^9, 3.750691670876034*^9}, {
   3.7506917801952314`*^9, 3.750691781210782*^9}, 3.7506918555196114`*^9, {
   3.7630574606931477`*^9, 
   3.763057460776963*^9}},ExpressionUUID->"3f0f308d-5fda-45b1-bdfd-\
84f73327a2e8"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
   "imgs", " ", "=", " ", "\"\<Figure 6(c) - Kneed Walker/*.png\>\""}], ";"}],
   "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"imgs", " ", "=", " ", 
   RowBox[{"BLBipedTimeGrid", "[", 
    RowBox[{
     RowBox[{"man1", "\[LeftDoubleBracket]", 
      RowBox[{"30", ",", " ", "1"}], "\[RightDoubleBracket]"}], ",", " ", 
     RowBox[{"\"\<n\>\"", " ", "\[Rule]", " ", 
      RowBox[{"Automatic", "\[Rule]", " ", "4"}]}], ",", " ", 
     RowBox[{"ImageData", " ", "\[Rule]", " ", "imgs"}]}], "]"}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"BLExportTo", "[", 
   RowBox[{
   "\"\<Figures\>\"", ",", " ", "\"\<kw-traj-30.pdf\>\"", ",", " ", "imgs"}], 
   "]"}], ";"}]}], "Input",
 CellChangeTimes->{{3.791393989468225*^9, 3.791394062832802*^9}, {
   3.791394401744734*^9, 3.7913944910679398`*^9}, {3.7913945661511297`*^9, 
   3.791394575221718*^9}, {3.79139466521563*^9, 3.791394689393531*^9}, {
   3.791394771930129*^9, 3.7913947783810377`*^9}, 3.791459071918446*^9, {
   3.791459657914249*^9, 3.7914596779829807`*^9}, {3.7914628139789143`*^9, 
   3.7914628154880323`*^9}, {3.791463127309243*^9, 3.7914631289859867`*^9}, {
   3.791463317444816*^9, 3.791463334445256*^9}, 3.791463601128326*^9, {
   3.7914637007544317`*^9, 3.7914637120836763`*^9}, {3.791464373012692*^9, 
   3.791464393110777*^9}, {3.791639455892658*^9, 3.7916394602267017`*^9}, {
   3.7916395007708817`*^9, 3.791639622749827*^9}, {3.7916396969039507`*^9, 
   3.791639755651149*^9}, {3.79163982560602*^9, 3.791639854815084*^9}, {
   3.791647721479773*^9, 3.791647733671887*^9}, {3.791647881634899*^9, 
   3.791647934590715*^9}, {3.791819516697873*^9, 3.791819533461616*^9}, {
   3.791819576160439*^9, 3.7918196032148857`*^9}, {3.79181964001114*^9, 
   3.791819652889821*^9}, {3.791819859587528*^9, 3.791819886100416*^9}, 
   3.791819951910173*^9, {3.791824000036619*^9, 3.791824019083947*^9}, {
   3.799793497794046*^9, 3.7997935183741217`*^9}},
 CellLabel->"In[44]:=",ExpressionUUID->"f4929fad-a28e-423c-9f0f-7e5286927f31"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Node.js (ThreeJS)", "Section",
 InitializationCell->True,
 CellChangeTimes->{{3.593429863957615*^9, 3.5934298658013515`*^9}, 
   3.593430810778412*^9, 3.708167171380418*^9, {3.710781230070614*^9, 
   3.7107812485083423`*^9}, {3.7107854886192164`*^9, 
   3.7107855078694816`*^9}, {3.7107856220274305`*^9, 3.710785626683711*^9}, {
   3.720021912558138*^9, 3.7200219642461476`*^9}, {3.7372660863442917`*^9, 
   3.737266089312806*^9}, {3.741451452539322*^9, 3.7414514566483793`*^9}, {
   3.750514817078146*^9, 3.750514819637392*^9}, {3.799770417533008*^9, 
   3.799770424909326*^9}},ExpressionUUID->"43236f6e-7150-4801-b1af-\
49627c73f86f"],

Cell["\<\
Create a JSON file with trajectory and kinematic information for use in \
GaitBrowser web app\
\>", "Text",
 CellChangeTimes->{{3.7997797930544453`*^9, 3.799779823894622*^9}, {
  3.7997813535012903`*^9, 
  3.799781393561204*^9}},ExpressionUUID->"0fdc4998-0ec9-4b46-9d65-\
fae184b31be6"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"steps", " ", "=", " ", "4"}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"c", " ", "=", " ", 
   RowBox[{"man1", "\[LeftDoubleBracket]", 
    RowBox[{"30", ",", " ", "1"}], "\[RightDoubleBracket]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"T", " ", "=", " ", 
   RowBox[{
    RowBox[{"c", "\[LeftDoubleBracket]", 
     RowBox[{"-", "1"}], "\[RightDoubleBracket]"}], 
    RowBox[{"Range", "[", 
     RowBox[{"0", ",", " ", "steps"}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"T", " ", "=", " ", 
    RowBox[{"Prepend", "[", 
     RowBox[{
      RowBox[{"Flatten", "[", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"c", "\[LeftDoubleBracket]", 
           RowBox[{
            RowBox[{"-", "2"}], ";;", 
            RowBox[{"-", "1"}]}], "\[RightDoubleBracket]"}], " ", "+", " ", 
          "#"}], "&"}], " ", "/@", " ", "T"}], "]"}], ",", " ", "0"}], 
     "]"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"A", " ", "=", " ", 
   RowBox[{"<|", "\[IndentingNewLine]", 
    RowBox[{"\"\<Model\>\"", " ", "\[Rule]", " ", 
     RowBox[{"<|", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"\"\<Figure 6(c) - Kneed Walker\>\"", " ", "\[Rule]", " ", 
        RowBox[{"BLGaitKinematics", "[", 
         RowBox[{"c", ",", " ", 
          RowBox[{"BLSim", " ", "\[Rule]", " ", 
           RowBox[{"\"\<T\>\"", " ", "\[Rule]", " ", "T"}]}], ",", " ", 
          RowBox[{"\"\<at\>\"", " ", "\[Rule]", " ", "False"}], ",", " ", 
          RowBox[{"\"\<n\>\"", " ", "\[Rule]", " ", "1"}]}], "]"}]}], ",", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Options", " ", "\[Rule]", " ", 
        RowBox[{"BLMeshOptions", "[", "]"}]}]}], "\[IndentingNewLine]", 
      "|>"}]}], "\[IndentingNewLine]", "|>"}]}], ";"}]}], "Input",
 CellChangeTimes->{{3.76633406430278*^9, 3.766334064802713*^9}, {
   3.7663353720017433`*^9, 3.7663353765795393`*^9}, {3.7663604176205883`*^9, 
   3.7663605160898046`*^9}, {3.7663623763620157`*^9, 
   3.7663624338120117`*^9}, {3.7663625632704954`*^9, 3.766362601845817*^9}, {
   3.7663626750932274`*^9, 3.766362791281769*^9}, {3.7663629157603235`*^9, 
   3.7663630609246626`*^9}, {3.766363222698536*^9, 3.766363237572929*^9}, {
   3.766363272117281*^9, 3.7663632758045235`*^9}, {3.7663643042169695`*^9, 
   3.76636430910723*^9}, {3.766364465942361*^9, 3.7663645265016203`*^9}, {
   3.766364566451337*^9, 3.7663645715290923`*^9}, {3.7663649754783983`*^9, 
   3.7663650836785355`*^9}, {3.766365116113682*^9, 3.766365132276515*^9}, {
   3.7663653414329*^9, 3.7663653419641275`*^9}, 3.766365793984026*^9, 
   3.766367269300981*^9, {3.7663673690099173`*^9, 3.7663673884234962`*^9}, {
   3.7663681077062483`*^9, 3.766368109018648*^9}, {3.7664007000411773`*^9, 
   3.766400713758924*^9}, {3.7664190838036795`*^9, 3.766419083944289*^9}, {
   3.7664368638637877`*^9, 3.766436919989004*^9}, {3.7664438703329535`*^9, 
   3.7664438903783894`*^9}, {3.7664441067722263`*^9, 3.766444159299676*^9}, {
   3.766444392921507*^9, 3.766444413629992*^9}, {3.7664504118246856`*^9, 
   3.7664504118715534`*^9}, {3.76645054762597*^9, 3.7664506292936277`*^9}, {
   3.7664506721967506`*^9, 3.7664508308382983`*^9}, {3.766450867882492*^9, 
   3.766450898982709*^9}, {3.766450940201646*^9, 3.7664510379389715`*^9}, {
   3.766451134194826*^9, 3.766451260606711*^9}, {3.7664513590810194`*^9, 
   3.766451362049554*^9}, {3.7675302135997334`*^9, 3.7675302142403116`*^9}, {
   3.7675302907231627`*^9, 3.7675302940041676`*^9}, {3.767530362077297*^9, 
   3.767530567851576*^9}, {3.767530607185993*^9, 3.7675306077953067`*^9}, {
   3.7677057124113474`*^9, 3.7677057130831757`*^9}, {3.767706297379301*^9, 
   3.767706332329675*^9}, {3.769277497864826*^9, 3.7692775574699564`*^9}, {
   3.76927760916267*^9, 3.769277634957746*^9}, 3.7692776827021475`*^9, {
   3.7692778106218176`*^9, 3.769277837177308*^9}, {3.7692779425958977`*^9, 
   3.769277942752147*^9}, {3.769278921433175*^9, 3.7692790000455017`*^9}, {
   3.770053828872373*^9, 3.7700538320599275`*^9}, {3.7764344670508347`*^9, 
   3.776434471675969*^9}, {3.776863225040592*^9, 3.7768632266262074`*^9}, 
   3.776864057541615*^9, {3.791823972313951*^9, 3.7918239723880167`*^9}, {
   3.791824195430737*^9, 3.791824201561838*^9}, {3.791840382111648*^9, 
   3.791840383110433*^9}, {3.792172112832899*^9, 3.792172113239492*^9}},
 CellLabel->"In[47]:=",ExpressionUUID->"459d7d58-4280-4ce6-a2b2-cc8f5ce8956c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"BLExportBipedToThreeJS", "[", "A", "]"}], ";"}]], "Input",
 CellChangeTimes->{{3.7663136542020392`*^9, 3.7663136804813814`*^9}, 
   3.7663137286437693`*^9, {3.766331190019231*^9, 3.7663311938511066`*^9}, {
   3.7663340622716494`*^9, 3.7663340629747334`*^9}, {3.7675307142304077`*^9, 
   3.767530714558506*^9}, 3.7692776889517417`*^9, {3.770053836317885*^9, 
   3.770053837489674*^9}, 3.772985211613246*^9, 3.7764344589528093`*^9, 
   3.789230610599822*^9, {3.799793553779129*^9, 3.799793556552487*^9}},
 CellLabel->"In[52]:=",ExpressionUUID->"1b16908a-c863-47d1-bfec-ec951613e9cd"]
}, Open  ]]
}, Open  ]]
},
EvaluatorNames->{"Local" -> {"AutoStartOnLaunch" -> True}},
AutoGeneratedPackage->Automatic,
Evaluator->"Local",
WindowSize->{1373, 1505},
WindowMargins->{{Automatic, 0}, {0, Automatic}},
CellContext->"Global`",
FrontEndVersion->"11.3 for Linux x86 (64-bit) (March 6, 2018)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[579, 22, 233, 4, 102, "Chapter",ExpressionUUID->"0996b115-3cd0-4938-889e-3a404bbf8e35"],
Cell[CellGroupData[{
Cell[837, 30, 264, 4, 95, "Section",ExpressionUUID->"d35a9d37-fa1d-438f-ab0a-d88a97e4b5c8"],
Cell[1104, 36, 1322, 30, 206, "Input",ExpressionUUID->"1247f3b0-bee8-49a6-b6ae-6c5a298ebf81"]
}, Open  ]],
Cell[CellGroupData[{
Cell[2463, 71, 160, 3, 95, "Section",ExpressionUUID->"10a1cf1f-17e4-4abb-83c3-92e65bd10885"],
Cell[2626, 76, 710, 14, 86, "Input",ExpressionUUID->"68967f29-1198-49a4-8605-9f212a90c743"]
}, Open  ]],
Cell[CellGroupData[{
Cell[3373, 95, 332, 5, 95, "Section",ExpressionUUID->"4ad0f40f-3a07-437c-9e58-475fb805f335"],
Cell[3708, 102, 754, 13, 45, "Input",ExpressionUUID->"cc4640ab-d293-488e-b8d2-fdc5e6cfa8cd"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[4511, 121, 346, 5, 102, "Chapter",ExpressionUUID->"f9a0dd6e-2ce8-4c9f-a2b1-efd897a2a24b"],
Cell[4860, 128, 273, 6, 52, "Text",ExpressionUUID->"895df482-afa2-4f67-8b8a-d7e62c3d5fae"],
Cell[CellGroupData[{
Cell[5158, 138, 597, 10, 95, "Section",ExpressionUUID->"bf4c0e89-2d52-4e94-8c5b-3e7e3237c629",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[5780, 152, 449, 7, 74, "Subsection",ExpressionUUID->"3f0f308d-5fda-45b1-bdfd-84f73327a2e8"],
Cell[6232, 161, 2094, 38, 206, "Input",ExpressionUUID->"f4929fad-a28e-423c-9f0f-7e5286927f31"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[8375, 205, 642, 10, 95, "Section",ExpressionUUID->"43236f6e-7150-4801-b1af-49627c73f86f",
 InitializationCell->True],
Cell[9020, 217, 296, 7, 52, "Text",ExpressionUUID->"0fdc4998-0ec9-4b46-9d65-fae184b31be6"],
Cell[9319, 226, 4557, 84, 566, "Input",ExpressionUUID->"459d7d58-4280-4ce6-a2b2-cc8f5ce8956c"],
Cell[13879, 312, 616, 9, 45, "Input",ExpressionUUID->"1b16908a-c863-47d1-bfec-ec951613e9cd"]
}, Open  ]]
}, Open  ]]
}
]
*)

