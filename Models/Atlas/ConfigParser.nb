(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     77531,       1565]
NotebookOptionsPosition[     75523,       1517]
NotebookOutlinePosition[     75890,       1533]
CellTagsIndexPosition[     75847,       1530]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Begin Package", "Section",
 CellChangeTimes->{{3.5914870039053636`*^9, 
  3.591487004222381*^9}},ExpressionUUID->"c6b6af92-f4bd-411a-be67-\
ab66a4e5ba29"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"BeginPackage", "[", 
   RowBox[{"\"\<BipedalLocomotion`Atlas`\>\"", ",", " ", 
    RowBox[{"{", 
     RowBox[{
     "\"\<GlobalVariables`\>\"", ",", " ", "\"\<RigidBodyDynamics`\>\"", ",", 
      " ", "\"\<BipedalLocomotion`\>\"", ",", " ", 
      "\"\<BipedalLocomotion`Model`\>\""}], "}"}]}], "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{
  3.5844197483839703`*^9, {3.5844250604318256`*^9, 3.5844250721475377`*^9}, {
   3.5844251233785*^9, 3.5844251234877005`*^9}, {3.5844253988774505`*^9, 
   3.5844254390946617`*^9}, {3.5844254919948354`*^9, 3.5844254990149255`*^9}, 
   3.584425543397398*^9, {3.584425574800518*^9, 3.584425581945394*^9}, {
   3.5844256737523947`*^9, 3.5844257230957055`*^9}, {3.5844279668250203`*^9, 
   3.5844279860756264`*^9}, {3.584428374816189*^9, 3.584428378919037*^9}, {
   3.5914865865694637`*^9, 3.591486626255737*^9}, {3.5914867823906765`*^9, 
   3.5914867827646985`*^9}, {3.591486817520689*^9, 3.5914868205858636`*^9}, {
   3.591486965884186*^9, 3.5914869664642324`*^9}, {3.5915022447717495`*^9, 
   3.5915022459698176`*^9}, {3.591542902441803*^9, 3.591542929051241*^9}, {
   3.59154329988008*^9, 3.591543327692632*^9}, 3.5915439898189273`*^9, {
   3.5915443331789765`*^9, 3.5915443348977413`*^9}, {3.591544409656703*^9, 
   3.591544412687962*^9}, {3.591721260928192*^9, 3.591721326772053*^9}, {
   3.5922422663532963`*^9, 3.592242267056429*^9}, {3.5922818277082567`*^9, 
   3.59228183637475*^9}, {3.593367625062662*^9, 3.5933676251720285`*^9}, {
   3.704468357519539*^9, 3.704468459841198*^9}, {3.7044685529026203`*^9, 
   3.704468620873731*^9}, {3.7044692938575964`*^9, 3.704469294201355*^9}, {
   3.7044693718565884`*^9, 3.7044694237922263`*^9}, 3.7044696047095137`*^9, {
   3.704469723121451*^9, 3.7044697494763565`*^9}, {3.7044713775105753`*^9, 
   3.7044713779682055`*^9}, {3.71007627184459*^9, 3.7100763129700594`*^9}, {
   3.710085252492481*^9, 3.710085269273345*^9}, {3.710085701211694*^9, 
   3.710085704820245*^9}, {3.71008573624848*^9, 3.7100857468419538`*^9}, {
   3.7100858618232365`*^9, 3.710085866727702*^9}, {3.710085919261855*^9, 
   3.7100859355283422`*^9}, {3.7100860101270795`*^9, 3.710086010815563*^9}, {
   3.7100862247653303`*^9, 3.7100862253687563`*^9}, {3.7100876279638534`*^9, 
   3.7100876368821716`*^9}, {3.710247193222289*^9, 3.710247196972357*^9}, {
   3.710249077736276*^9, 3.710249078486265*^9}, {3.719112887775036*^9, 
   3.719112914478425*^9}, {3.719112998854257*^9, 3.719113000323023*^9}, {
   3.7191136395085473`*^9, 3.719113649164892*^9}, 3.719114879496228*^9, {
   3.7192011247884035`*^9, 3.7192011277727957`*^9}, {3.7192296580574007`*^9, 
   3.719229673151224*^9}, {3.7192816589156504`*^9, 3.7192816633531713`*^9}, {
   3.7193169534786367`*^9, 3.719316953853657*^9}, {3.719336319403597*^9, 
   3.719336334153718*^9}, {3.7193364584516335`*^9, 3.719336463561051*^9}, {
   3.71950185152522*^9, 3.719501861181549*^9}, {3.7195019833075695`*^9, 
   3.7195020203343954`*^9}, {3.719530068564412*^9, 3.7195300955490136`*^9}, {
   3.7195306954134054`*^9, 3.719530696085286*^9}, {3.7196226368983707`*^9, 
   3.7196226373983574`*^9}, {3.719622769920648*^9, 3.7196227709987993`*^9}, {
   3.719622836655593*^9, 3.7196228393431067`*^9}, {3.7196228809997025`*^9, 
   3.7196229038124104`*^9}, {3.719773624383868*^9, 3.7197736245088606`*^9}, {
   3.7208092997367315`*^9, 3.7208092997367315`*^9}, {3.7208096046276426`*^9, 
   3.7208096050651493`*^9}, {3.7208591794935884`*^9, 
   3.7208591819154825`*^9}, {3.720870138698891*^9, 3.720870275387494*^9}, {
   3.720870426998068*^9, 3.72087043706066*^9}, {3.720870682089892*^9, 
   3.7208707421841035`*^9}, {3.7208710914681425`*^9, 
   3.7208710917962694`*^9}, {3.7208892420101304`*^9, 3.720889252133763*^9}, {
   3.7220971600091763`*^9, 3.7220971912438555`*^9}, {3.722098555399428*^9, 
   3.722098558055688*^9}, {3.722098707760352*^9, 3.722098707916614*^9}, {
   3.7453192242418756`*^9, 3.745319248039889*^9}, {3.7694346138233404`*^9, 
   3.7694346290727406`*^9}, {3.769441559634787*^9, 3.769441569498551*^9}, 
   3.769728629163947*^9, {3.769728823712801*^9, 
   3.769728824453967*^9}},ExpressionUUID->"e2c4f744-43d7-494b-a61f-\
0c759b87e8bb"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Load Atlas's .cfg file", "Section",
 CellChangeTimes->{{3.7208077897274356`*^9, 3.7208077941180954`*^9}, {
  3.7208110504247227`*^9, 
  3.720811050955966*^9}},ExpressionUUID->"02ae3bd0-a21f-4f64-8742-\
31732e72dafa"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"model", " ", "=", " ", 
   RowBox[{"Import", "[", "\"\<Atlas/atlas.cfg\>\"", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"model", " ", "=", " ", 
    RowBox[{
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "#"}], " ", "\[Equal]", " ", "0"}], ",", " ", 
        RowBox[{"{", "\"\<\>\"", "}"}], ",", " ", "#"}], "]"}], "&"}], " ", "/@",
      " ", "model"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"footDAE", " ", "=", " ", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\<./Atlas/Atlas/meshes/l_foot.dae\>\"", ",", " ", 
     "\"\<Graphics3D\>\""}], "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"coordsDAE", " ", "=", " ", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\<./Atlas/Atlas/meshes/l_foot.dae\>\"", ",", " ", 
     "\"\<VertexData\>\""}], "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{
  3.720811035533951*^9, {3.7476626187313747`*^9, 3.747662638308053*^9}, 
   3.750617521226757*^9, {3.7912468524193077`*^9, 
   3.791246852750476*^9}},ExpressionUUID->"49428acc-077f-4f22-b7cf-\
e7439930b411"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Functions for parsing Atlas's .cfg file", "Section",
 CellChangeTimes->{{3.7208077897274356`*^9, 
  3.7208077941180954`*^9}},ExpressionUUID->"138cb99d-91e5-42e8-8634-\
7a159af38f6f"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"GetRecord", "[", "n_", "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "struct", ",", " ", "start", ",", " ", "stop", ",", " ", "N", ",", " ",
         "pos", ",", " ", "joint", ",", " ", "r"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"N", " ", "=", " ", 
        RowBox[{"Length", "@", "model"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"struct", " ", "=", " ", 
        RowBox[{"StringSplit", "[", 
         RowBox[{"n", ",", " ", "\"\<.\>\""}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"start", " ", "=", " ", "1"}], ";", "\[IndentingNewLine]", 
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"While", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"start", " ", "\[LessEqual]", " ", "N"}], " ", "&&", " ", 
            RowBox[{"!", 
             RowBox[{"StringMatchQ", "[", 
              RowBox[{"s", ",", " ", 
               RowBox[{"StringTrim", "[", 
                RowBox[{"model", "\[LeftDoubleBracket]", 
                 RowBox[{"start", ",", " ", "1"}], "\[RightDoubleBracket]"}], 
                "]"}]}], "]"}]}]}], ",", " ", 
           RowBox[{"start", "++"}]}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"s", ",", " ", 
           RowBox[{
            RowBox[{
             RowBox[{"\"\<struct \>\"", " ", "<>", " ", "#"}], "&"}], " ", "/@",
             "  ", "struct"}]}], "}"}]}], "\[IndentingNewLine]", "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"stop", " ", "=", " ", "start"}], ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"stop", " ", "<", " ", "N"}], ",", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"While", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"stop", " ", "\[LessEqual]", " ", "N"}], " ", "&&", " ", 
             RowBox[{
              RowBox[{"StringLength", "[", 
               RowBox[{"StringTrim", "[", 
                RowBox[{"model", "\[LeftDoubleBracket]", 
                 RowBox[{"stop", ",", " ", "1"}], "\[RightDoubleBracket]"}], 
                "]"}], "]"}], " ", ">", " ", "0"}]}], ",", " ", 
            RowBox[{"stop", "++"}]}], "]"}], ";"}]}], "\[IndentingNewLine]", 
        "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{"start", ",", " ", "stop"}], "}"}]}]}], "\[IndentingNewLine]",
      "]"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetAttributes", "[", 
   RowBox[{"GetValue", ",", " ", "Listable"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"GetValue", "[", "m_", "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "vals", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"vals", " ", "=", " ", 
        RowBox[{"StringSplit", "[", "m", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "@", "vals"}], " ", "\[Equal]", " ", "1"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"Internal`StringToDouble", "[", 
          RowBox[{"First", "@", "vals"}], "]"}], ",", "\[IndentingNewLine]", 
         RowBox[{"Internal`StringToDouble", " ", "/@", " ", "vals"}]}], 
        "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"GetLinkNames", "[", "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"l", ",", " ", "rc"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"rc", " ", "=", " ", 
        RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"l", " ", "=", " ", 
           RowBox[{"StringSplit", "[", 
            RowBox[{"model", "\[LeftDoubleBracket]", 
             RowBox[{"i", ",", " ", "1"}], "\[RightDoubleBracket]"}], "]"}]}],
           ";", "\[IndentingNewLine]", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"Length", "@", "l"}], " ", ">", " ", "0"}], " ", "&&", 
             " ", 
             RowBox[{"StringMatchQ", "[", 
              RowBox[{"\"\<link_names\>\"", ",", " ", 
               RowBox[{
               "l", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], 
              "]"}]}], ",", " ", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"rc", " ", "=", " ", 
              RowBox[{"l", "\[LeftDoubleBracket]", 
               RowBox[{"3", ";;"}], "\[RightDoubleBracket]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"Break", "[", "]"}]}]}], "\[IndentingNewLine]", "]"}], 
          ";"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"i", ",", " ", 
           RowBox[{"Length", "@", "model"}]}], "}"}]}], "\[IndentingNewLine]",
         "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", "rc"}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetAttributes", "[", 
   RowBox[{"ParseLink", ",", " ", "Listable"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ParseLink", "[", "rec_", "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "n", ",", " ", "m", ",", " ", "start", ",", " ", "stop", ",", " ", 
        "pat"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"start", ",", " ", "stop"}], "}"}], " ", "=", " ", 
        RowBox[{"GetRecord", "[", "rec", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"start", " ", "\[Equal]", " ", "stop"}], ",", " ", 
         RowBox[{"Return", "[", "$Failed", "]"}]}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"n", " ", "=", " ", 
        RowBox[{
         RowBox[{"StringSplit", "[", 
          RowBox[{"model", "\[LeftDoubleBracket]", 
           RowBox[{"start", ",", "1"}], "\[RightDoubleBracket]"}], "]"}], 
         "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"m", " ", "=", " ", 
        RowBox[{"StringSplit", "[", 
         RowBox[{
          RowBox[{"Flatten", "@", 
           RowBox[{"model", "\[LeftDoubleBracket]", 
            RowBox[{
             RowBox[{"start", "+", "1"}], ";;", 
             RowBox[{"stop", "-", "1"}]}], "\[RightDoubleBracket]"}]}], ",", 
          " ", "\"\<=\>\"", ",", " ", "2"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"m", " ", "=", " ", 
        RowBox[{"StringTrim", " ", "/@", " ", "m"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"pat", " ", "=", " ", 
        RowBox[{"Join", "[", 
         RowBox[{
          RowBox[{"Thread", "[", 
           RowBox[{
            RowBox[{"m", "\[LeftDoubleBracket]", 
             RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], 
            "\[Rule]", " ", 
            RowBox[{"m", "\[LeftDoubleBracket]", 
             RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]}], "]"}], 
          ",", " ", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"\"\<parent_link\>\"", "\[Rule]", " ", "\"\<root\>\""}], 
            ",", 
            RowBox[{
            "\"\<parent_kin_dof\>\"", "\[Rule]", " ", 
             "\"\<float.base\>\""}]}], "}"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"m", " ", "=", " ", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
          "\"\<index\>\"", ",", "\"\<parent_link\>\"", ",", 
           "\"\<parent_kin_dof\>\"", ",", "\"\<mass\>\"", ",", "\"\<0\>\"", 
           ",", "\"\<0\>\"", ",", "\"\<0\>\"", ",", " ", "\"\<com_x\>\"", 
           ",", "\"\<com_y\>\"", ",", "\"\<com_z\>\"", ",", " ", 
           "\"\<moi_xx\>\"", ",", "\"\<moi_xy\>\"", ",", "\"\<moi_xz\>\"", 
           ",", "\"\<moi_xy\>\"", ",", "\"\<moi_yy\>\"", ",", 
           "\"\<moi_yz\>\"", ",", "\"\<moi_xz\>\"", ",", " ", 
           "\"\<moi_yz\>\"", ",", "\"\<moi_zz\>\""}], "}"}], " ", "/.", " ", 
         "pat"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"m", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
        " ", "=", " ", 
        RowBox[{"n", "\[Rule]", " ", 
         RowBox[{
          RowBox[{"Floor", "[", 
           RowBox[{"GetValue", "[", 
            RowBox[{
            "m", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
            "]"}], "]"}], " ", "+", " ", "1"}]}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"m", "\[LeftDoubleBracket]", 
         RowBox[{"4", ";;"}], "\[RightDoubleBracket]"}], " ", "=", " ", 
        RowBox[{"GetValue", "[", 
         RowBox[{"m", "\[LeftDoubleBracket]", 
          RowBox[{"4", ";;"}], "\[RightDoubleBracket]"}], "]"}]}], ";", 
       "\[IndentingNewLine]", "m"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetAttributes", "[", 
   RowBox[{"ParseJoint", ",", " ", "Listable"}], "]"}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ParseJoint", "[", "\"\<float.base\>\"", "]"}], " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
    "\"\<float.base\>\"", ",", " ", "\"\<fb\>\"", ",", " ", "z6", ",", " ", 
     "z3"}], "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"ParseJoint", "[", "rec_", "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "m", ",", " ", "j", ",", " ", "pat", ",", " ", "start", ",", " ", "stop",
       ",", " ", "\[Theta]", ",", " ", "axis"}], "}"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"start", ",", " ", "stop"}], "}"}], " ", "=", "  ", 
      RowBox[{"GetRecord", "[", "rec", "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{"start", " ", "\[Equal]", " ", "stop"}], ",", " ", 
       RowBox[{"Return", "[", "$Failed", "]"}]}], "]"}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"j", " ", "=", " ", 
      RowBox[{"\"\<r\>\"", " ", "<>", " ", 
       RowBox[{"StringTake", "[", 
        RowBox[{"rec", ",", " ", 
         RowBox[{"-", "1"}]}], "]"}]}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"m", " ", "=", " ", 
      RowBox[{"StringSplit", "[", 
       RowBox[{
        RowBox[{"Flatten", "@", 
         RowBox[{"model", "\[LeftDoubleBracket]", 
          RowBox[{
           RowBox[{"start", "+", "1"}], ";;", 
           RowBox[{"stop", "-", "1"}]}], "\[RightDoubleBracket]"}]}], ",", 
        " ", "\"\<=\>\"", ",", " ", "2"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"m", " ", "=", " ", 
      RowBox[{"StringTrim", " ", "/@", " ", "m"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"pat", " ", "=", " ", 
      RowBox[{"Thread", "[", 
       RowBox[{
        RowBox[{"m", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], "\[Rule]",
         " ", 
        RowBox[{"m", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", "2"}], "\[RightDoubleBracket]"}]}], "]"}]}], ";",
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"m", " ", "=", " ", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{
        "rec", ",", " ", "j", ",", " ", "\"\<offset\>\"", ",", " ", 
         "\"\<axis\>\""}], "}"}], " ", "/.", " ", "pat"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"m", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}], 
      " ", "=", " ", 
      RowBox[{"\"\<0 0 0 \>\"", " ", "<>", " ", 
       RowBox[{
       "m", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"m", "\[LeftDoubleBracket]", 
       RowBox[{"3", ";;", "4"}], "\[RightDoubleBracket]"}], " ", "=", " ", 
      RowBox[{"GetValue", "[", 
       RowBox[{"m", "\[LeftDoubleBracket]", 
        RowBox[{"3", ";;", "4"}], "\[RightDoubleBracket]"}], "]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", "m"}]}], 
   "\[IndentingNewLine]", "]"}]}]}], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True,
 CellChangeTimes->{
  3.5935373428029976`*^9, {3.599096229670998*^9, 3.5990962315031023`*^9}, {
   3.5990973722864313`*^9, 3.5990973743115473`*^9}, {3.5990977857511063`*^9, 
   3.5990977884552603`*^9}, {3.599097878127395*^9, 3.599097884591765*^9}, 
   3.610730407934533*^9, 3.6108796050389833`*^9, {3.6108799870665703`*^9, 
   3.6108799920658565`*^9}, 3.610886988825547*^9, {3.610887290282818*^9, 
   3.610887293852005*^9}, {3.6115435505387526`*^9, 3.611543550882502*^9}, {
   3.6144680163360963`*^9, 3.6144680166921177`*^9}, {3.614612256783276*^9, 
   3.614612264488721*^9}, {3.6146503166187773`*^9, 3.6146503240250463`*^9}, 
   3.614698151439081*^9, 3.6146993110312667`*^9, {3.6148505790265408`*^9, 
   3.6148505871046953`*^9}, {3.615552151358158*^9, 3.6155521559987936`*^9}, 
   3.6155534773451247`*^9, 3.6155555089115314`*^9, {3.6518501104720335`*^9, 
   3.6518501191752105`*^9}, {3.6518643470814667`*^9, 3.6518643506284266`*^9}, 
   3.6821852962309294`*^9, {3.6822070217291737`*^9, 3.6822070406199827`*^9}, 
   3.6822767461204205`*^9, {3.682288801921726*^9, 3.682288802564524*^9}, 
   3.682289350429621*^9, {3.6822901967268214`*^9, 3.6822901972038193`*^9}, {
   3.6822919812224684`*^9, 3.6822919841445484`*^9}, {3.6823572575635753`*^9, 
   3.6823572608512945`*^9}, 3.68235763607275*^9, 3.682357815668155*^9, {
   3.6960746887804403`*^9, 3.6960746950773716`*^9}, {3.696122958715283*^9, 
   3.696122996843132*^9}, 3.6961231543613205`*^9, {3.696123426580105*^9, 
   3.6961234281985664`*^9}, {3.6961234691755657`*^9, 3.696123494396863*^9}, {
   3.6961235396177387`*^9, 3.696123576768961*^9}, {3.696123781697255*^9, 
   3.696123784675712*^9}, {3.6961238578221273`*^9, 3.6961239125797276`*^9}, {
   3.6961240474942193`*^9, 3.696124091945079*^9}, {3.696125840131276*^9, 
   3.6961259045366697`*^9}, 3.696128497378868*^9, 3.6961289190688977`*^9, {
   3.696129085282256*^9, 3.6961291041594057`*^9}, 3.6963339513244658`*^9, {
   3.696335379405243*^9, 3.69633538572027*^9}, {3.696335874940115*^9, 
   3.696335911669161*^9}, {3.696337109027116*^9, 3.696337115048519*^9}, {
   3.696345751353446*^9, 3.696345754211932*^9}, 3.696346669071505*^9, {
   3.696347038168556*^9, 3.696347041548943*^9}, {3.6963480069259634`*^9, 
   3.6963480103933997`*^9}, {3.6967663265731754`*^9, 3.69676633713795*^9}, {
   3.6967664105302277`*^9, 3.6967664135226336`*^9}, {3.7021246717720766`*^9, 
   3.7021246935535507`*^9}, {3.7021248985879602`*^9, 3.702124907884925*^9}, {
   3.702127089885914*^9, 3.702127090307787*^9}, {3.702127452805009*^9, 
   3.7021274600923667`*^9}, {3.7100960922192497`*^9, 3.710096108156515*^9}, {
   3.7100962719983573`*^9, 3.71009627471226*^9}, {3.710096324196254*^9, 
   3.7100963377137985`*^9}, 3.7101227504913225`*^9, {3.7101228917944403`*^9, 
   3.7101228983566914`*^9}, {3.710126246172827*^9, 3.7101263185059605`*^9}, {
   3.7101263543282847`*^9, 3.710126365690318*^9}, 3.7101271941591244`*^9, 
   3.7101284314538555`*^9, 3.7102510519733486`*^9, {3.710541419068189*^9, 
   3.710541449490366*^9}, 3.710542049339803*^9, 3.7105421391531744`*^9, 
   3.7137450210156364`*^9, 3.7171710669765606`*^9, {3.717171123226927*^9, 
   3.7171711234613156`*^9}, {3.7171711993993807`*^9, 3.717171299900145*^9}, {
   3.7171721206980195`*^9, 3.7171721307918468`*^9}, {3.717172164276474*^9, 
   3.7171721676046257`*^9}, {3.717174156280943*^9, 3.7171741738435593`*^9}, 
   3.7177806699586153`*^9, {3.717780703787053*^9, 3.717780708472043*^9}, {
   3.717910616979868*^9, 3.7179106214642763`*^9}, {3.7179106941308737`*^9, 
   3.7179106958027554`*^9}, {3.7179107295925865`*^9, 3.717910760686614*^9}, {
   3.7179108023122725`*^9, 3.7179108059216805`*^9}, 3.717911046125701*^9, {
   3.717912011571754*^9, 3.7179120127123795`*^9}, {3.717913044201214*^9, 
   3.717913057029476*^9}, 3.7179139057875443`*^9, {3.7179351792300634`*^9, 
   3.7179352029021487`*^9}, {3.7187620780780096`*^9, 3.7187620786405325`*^9}, 
   3.7187900474816947`*^9, {3.719110303428886*^9, 3.719110304850775*^9}, {
   3.720807308859977*^9, 3.720807309313103*^9}, 3.720807665913802*^9, {
   3.7208077101173177`*^9, 3.7208077105548368`*^9}, {3.7208077453988905`*^9, 
   3.7208077775554447`*^9}, {3.7208078150088997`*^9, 
   3.7208078655093765`*^9}, {3.7208078958065133`*^9, 3.720807907947259*^9}, 
   3.7208109208454204`*^9, 3.7208109985492496`*^9, 3.7208115684138107`*^9, {
   3.7208117860095453`*^9, 3.720811796494029*^9}, 3.7453252100335445`*^9, {
   3.769548648541979*^9, 3.7695486856798134`*^9}, {3.769548719692442*^9, 
   3.769548721430423*^9}, {3.7695487536723223`*^9, 3.7695487982003126`*^9}, {
   3.769548996810831*^9, 3.7695490194798603`*^9}, {3.7695605806423645`*^9, 
   3.769560629620322*^9}, {3.769560713342888*^9, 3.7695607135308604`*^9}, {
   3.769562530580043*^9, 3.769562533479329*^9}, {3.7695625772116275`*^9, 
   3.769562577556366*^9}, {3.7695667659900618`*^9, 3.7695667690901194`*^9}, {
   3.7697249817707744`*^9, 3.769725007183236*^9}, {3.769725737450338*^9, 
   3.7697257377030716`*^9}, {3.7697282164401093`*^9, 
   3.7697282173912697`*^9}},ExpressionUUID->"f06be6d3-18c9-49e1-a8a3-\
2ef14dac6f16"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"AxisAngleToQuaternion", "[", 
     RowBox[{"axis_", ",", " ", "\[Theta]_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"a", ",", " ", "s", ",", " ", "c"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"a", " ", "=", " ", 
        RowBox[{"\[Theta]", "/", "2"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"s", " ", "=", " ", 
        RowBox[{"Sin", "[", "a", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"c", " ", "=", " ", 
        RowBox[{"Cos", "[", "a", "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"Append", "[", 
        RowBox[{
         RowBox[{"s", " ", 
          RowBox[{"Normalize", "@", "axis"}]}], ",", " ", "c"}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"AxisAngleToRotation", "[", 
     RowBox[{"axis_", ",", " ", "\[Theta]_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"x", ",", " ", "y", ",", " ", "z", ",", " ", "w"}], "}"}], ",",
       "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"x", ",", " ", "y", ",", " ", "z", ",", " ", "w"}], "}"}], 
        " ", "=", " ", 
        RowBox[{"AxisAngleToQuaternion", "[", 
         RowBox[{"axis", ",", " ", "\[Theta]"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"1", "-", 
            RowBox[{"2", 
             RowBox[{"y", "^", "2"}]}], "-", 
            RowBox[{"2", 
             RowBox[{"z", "^", "2"}]}]}], ",", " ", 
           RowBox[{
            RowBox[{"2", "x", " ", "y"}], "-", 
            RowBox[{"2", "z", " ", "w"}]}], ",", " ", 
           RowBox[{
            RowBox[{"2", "x", " ", "z"}], "+", 
            RowBox[{"2", "y", " ", "w"}]}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"2", "x", " ", "y"}], "+", 
            RowBox[{"2", "z", " ", "w"}]}], ",", " ", 
           RowBox[{"1", "-", 
            RowBox[{"2", 
             RowBox[{"x", "^", "2"}]}], "-", 
            RowBox[{"2", 
             RowBox[{"z", "^", "2"}]}]}], ",", " ", 
           RowBox[{
            RowBox[{"2", "y", " ", "z"}], "-", 
            RowBox[{"2", "x", " ", "w"}]}]}], "}"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{
           RowBox[{
            RowBox[{"2", "x", " ", "z"}], "-", 
            RowBox[{"2", "y", " ", "w"}]}], ",", " ", 
           RowBox[{
            RowBox[{"2", "y", " ", "z"}], "+", 
            RowBox[{"2", "x", " ", "w"}]}], ",", " ", 
           RowBox[{"1", "-", 
            RowBox[{"2", 
             RowBox[{"x", "^", "2"}]}], "-", 
            RowBox[{"2", 
             RowBox[{"y", "^", "2"}]}]}]}], "}"}]}], "\[IndentingNewLine]", 
        "}"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"Eaxis\[Theta]", "[", 
     RowBox[{"axis_", ",", " ", "\[Theta]_"}], "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "E", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"E", " ", "=", " ", 
        RowBox[{
         RowBox[{"RBDExpandExpression", "@", 
          RowBox[{"AxisAngleToRotation", "[", 
           RowBox[{"axis", ",", " ", "\[Theta]"}], "]"}]}], 
         "\[Transpose]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"RigidBodyDynamics`Private`Mat6", "[", 
        RowBox[{"E", ",", " ", "Z3", ",", " ", "Z3", ",", " ", "E"}], 
        "]"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"CreateModelData", "[", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"parent", ",", " ", "links", ",", " ", "joints", ",", " ", "p", 
       RowBox[{"(*", 
        RowBox[{",", " ", "axis", ",", " ", "\[Theta]"}], "*)"}], ",", " ", 
       "frames", ",", " ", "inertia", ",", " ", "S"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"links", " ", "=", " ", 
       RowBox[{"GetLinkNames", "[", "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"links", " ", "=", " ", 
       RowBox[{"ParseLink", "[", "links", "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"joints", " ", "=", " ", 
       RowBox[{"ParseJoint", "[", 
        RowBox[{"links", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", "3"}], "\[RightDoubleBracket]"}], "]"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"parent", " ", "=", " ", 
       RowBox[{
        RowBox[{"links", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", "2"}], "\[RightDoubleBracket]"}], " ", "/.",
         " ", 
        RowBox[{"Append", "[", 
         RowBox[{
          RowBox[{"links", "\[LeftDoubleBracket]", 
           RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], ",", 
          " ", 
          RowBox[{"\"\<root\>\"", "\[Rule]", " ", "0"}]}], "]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"frames", " ", "=", " ", 
       RowBox[{"joints", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "3"}], "\[RightDoubleBracket]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"inertia", " ", "=", " ", 
       RowBox[{"links", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", 
         RowBox[{"4", ";;"}]}], "\[RightDoubleBracket]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{".", "cfg"}], " ", "file", " ", "has", " ", "two", " ", 
        "frames", " ", "a", " ", "joint", " ", "frame", " ", "and", " ", 
        "axis", " ", "frame"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{
        "the", " ", "axis", " ", "frame", " ", "describes", " ", "the", " ", 
         "dof", " ", "using", " ", "axis"}], "-", 
        RowBox[{"angle", " ", "notation"}]}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"so", " ", "add", " ", "to", " ", "joint", " ", "library"}], 
       " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"RBDJoint", "[", 
       RowBox[{"\"\<float.base\>\"", ",", " ", 
        RowBox[{"RBDJoint", "[", "\"\<fb\>\"", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"With", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"axis", " ", "=", " ", 
            RowBox[{
            "#", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}], 
           "}"}], ",", " ", 
          RowBox[{"RBDJoint", "[", 
           RowBox[{
            RowBox[{
            "#", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], ",", 
            " ", 
            RowBox[{
             RowBox[{"Join", "[", 
              RowBox[{"axis", ",", " ", "z3"}], "]"}], "&"}], ",", " ", 
            RowBox[{
             RowBox[{"Eaxis\[Theta]", "[", 
              RowBox[{"axis", ",", " ", "#"}], "]"}], "&"}]}], "]"}]}], "]"}],
         " ", "&"}], " ", "/@", " ", 
       RowBox[{"joints", "\[LeftDoubleBracket]", 
        RowBox[{
         RowBox[{"2", ";;", 
          RowBox[{"-", "1"}]}], ",", " ", 
         RowBox[{"{", 
          RowBox[{"1", ",", "2", ",", 
           RowBox[{"-", "1"}]}], "}"}]}], "\[RightDoubleBracket]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"replace", " ", "#s", " ", "with", " ", "names"}], " ", "*)"}],
       "\[IndentingNewLine]", 
      RowBox[{"parent", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"#", " ", ">", " ", "0"}], ",", " ", 
           RowBox[{"joints", "\[LeftDoubleBracket]", 
            RowBox[{"#", ",", " ", "1"}], "\[RightDoubleBracket]"}], ",", " ",
            "Root"}], "]"}], "&"}], " ", "/@", " ", "parent"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
        RowBox[{"joint", " ", "type"}], " ", "\[Rule]", " ", 
        RowBox[{"joint", " ", "name"}]}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"S", " ", "=", " ", 
       RowBox[{"joints", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"return", " ", "robot", " ", "model"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"Flatten", " ", "/@", " ", 
       RowBox[{"(", 
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{"joints", "\[LeftDoubleBracket]", 
            RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], ",", 
           " ", "parent", ",", " ", "S", ",", " ", "frames", ",", " ", 
           "inertia"}], "}"}], "\[Transpose]"}], ")"}]}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True,
 CellChangeTimes->{
  3.5935373428029976`*^9, {3.599096229670998*^9, 3.5990962315031023`*^9}, {
   3.5990973722864313`*^9, 3.5990973743115473`*^9}, {3.5990977857511063`*^9, 
   3.5990977884552603`*^9}, {3.599097878127395*^9, 3.599097884591765*^9}, 
   3.610730407934533*^9, 3.6108796050389833`*^9, {3.6108799870665703`*^9, 
   3.6108799920658565`*^9}, 3.610886988825547*^9, {3.610887290282818*^9, 
   3.610887293852005*^9}, {3.6115435505387526`*^9, 3.611543550882502*^9}, {
   3.6144680163360963`*^9, 3.6144680166921177`*^9}, {3.614612256783276*^9, 
   3.614612264488721*^9}, {3.6146503166187773`*^9, 3.6146503240250463`*^9}, 
   3.614698151439081*^9, 3.6146993110312667`*^9, {3.6148505790265408`*^9, 
   3.6148505871046953`*^9}, {3.615552151358158*^9, 3.6155521559987936`*^9}, 
   3.6155534773451247`*^9, 3.6155555089115314`*^9, {3.6518501104720335`*^9, 
   3.6518501191752105`*^9}, {3.6518643470814667`*^9, 3.6518643506284266`*^9}, 
   3.6821852962309294`*^9, {3.6822070217291737`*^9, 3.6822070406199827`*^9}, 
   3.6822767461204205`*^9, {3.682288801921726*^9, 3.682288802564524*^9}, 
   3.682289350429621*^9, {3.6822901967268214`*^9, 3.6822901972038193`*^9}, {
   3.6822919812224684`*^9, 3.6822919841445484`*^9}, {3.6823572575635753`*^9, 
   3.6823572608512945`*^9}, 3.68235763607275*^9, 3.682357815668155*^9, {
   3.6960746887804403`*^9, 3.6960746950773716`*^9}, {3.696122958715283*^9, 
   3.696122996843132*^9}, 3.6961231543613205`*^9, {3.696123426580105*^9, 
   3.6961234281985664`*^9}, {3.6961234691755657`*^9, 3.696123494396863*^9}, {
   3.6961235396177387`*^9, 3.696123576768961*^9}, {3.696123781697255*^9, 
   3.696123784675712*^9}, {3.6961238578221273`*^9, 3.6961239125797276`*^9}, {
   3.6961240474942193`*^9, 3.696124091945079*^9}, {3.696125840131276*^9, 
   3.6961259045366697`*^9}, 3.696128497378868*^9, 3.6961289190688977`*^9, {
   3.696129085282256*^9, 3.6961291041594057`*^9}, 3.6963339513244658`*^9, {
   3.696335379405243*^9, 3.69633538572027*^9}, {3.696335874940115*^9, 
   3.696335911669161*^9}, {3.696337109027116*^9, 3.696337115048519*^9}, {
   3.696345751353446*^9, 3.696345754211932*^9}, 3.696346669071505*^9, {
   3.696347038168556*^9, 3.696347041548943*^9}, {3.6963480069259634`*^9, 
   3.6963480103933997`*^9}, {3.6967663265731754`*^9, 3.69676633713795*^9}, {
   3.6967664105302277`*^9, 3.6967664135226336`*^9}, {3.7021246717720766`*^9, 
   3.7021246935535507`*^9}, {3.7021248985879602`*^9, 3.702124907884925*^9}, {
   3.702127089885914*^9, 3.702127090307787*^9}, {3.702127452805009*^9, 
   3.7021274600923667`*^9}, {3.7100960922192497`*^9, 3.710096108156515*^9}, {
   3.7100962719983573`*^9, 3.71009627471226*^9}, {3.710096324196254*^9, 
   3.7100963377137985`*^9}, 3.7101227504913225`*^9, {3.7101228917944403`*^9, 
   3.7101228983566914`*^9}, {3.710126246172827*^9, 3.7101263185059605`*^9}, {
   3.7101263543282847`*^9, 3.710126365690318*^9}, 3.7101271941591244`*^9, 
   3.7101284314538555`*^9, 3.7102510519733486`*^9, {3.710541419068189*^9, 
   3.710541449490366*^9}, 3.710542049339803*^9, 3.7105421391531744`*^9, 
   3.7137450210156364`*^9, 3.7171710669765606`*^9, {3.717171123226927*^9, 
   3.7171711234613156`*^9}, {3.7171711993993807`*^9, 3.717171299900145*^9}, {
   3.7171721206980195`*^9, 3.7171721307918468`*^9}, {3.717172164276474*^9, 
   3.7171721676046257`*^9}, {3.717174156280943*^9, 3.7171741738435593`*^9}, 
   3.7177806699586153`*^9, {3.717780703787053*^9, 3.717780708472043*^9}, {
   3.717910616979868*^9, 3.7179106214642763`*^9}, {3.7179106941308737`*^9, 
   3.7179106958027554`*^9}, {3.7179107295925865`*^9, 3.717910760686614*^9}, {
   3.7179108023122725`*^9, 3.7179108059216805`*^9}, 3.717911046125701*^9, {
   3.717912011571754*^9, 3.7179120127123795`*^9}, {3.717913044201214*^9, 
   3.717913057029476*^9}, 3.7179139057875443`*^9, {3.7179351792300634`*^9, 
   3.7179352029021487`*^9}, {3.7187620780780096`*^9, 3.7187620786405325`*^9}, 
   3.7187900474816947`*^9, {3.719110303428886*^9, 3.719110304850775*^9}, {
   3.720807308859977*^9, 3.720807309313103*^9}, 3.720807665913802*^9, {
   3.7208077101173177`*^9, 3.7208077105548368`*^9}, {3.7208077453988905`*^9, 
   3.7208077775554447`*^9}, {3.7208078150088997`*^9, 
   3.7208078655093765`*^9}, {3.7208078958065133`*^9, 3.720807907947259*^9}, 
   3.7208109208454204`*^9, 3.7208109985492496`*^9, 3.7208115684138107`*^9, {
   3.7208117860095453`*^9, 3.720811796494029*^9}, 3.7208120353555746`*^9, {
   3.720858983194199*^9, 3.7208590142256813`*^9}, {3.7208590514134893`*^9, 
   3.7208590530853662`*^9}, {3.7208602354203043`*^9, 3.720860237045328*^9}, 
   3.7208711012494874`*^9, 3.7208888389456935`*^9, {3.7208890511322775`*^9, 
   3.7208891410315285`*^9}, {3.720889188378081*^9, 3.720889196480125*^9}, {
   3.722097109477397*^9, 3.722097112649311*^9}, {3.732901007617439*^9, 
   3.732901019164421*^9}, {3.7329010857944098`*^9, 3.732901086325632*^9}, {
   3.745325060590974*^9, 3.745325076511754*^9}, {3.7453251724580946`*^9, 
   3.7453252169549227`*^9}, {3.7453284817271385`*^9, 3.745328483851954*^9}, {
   3.7453347625177827`*^9, 3.7453347654394665`*^9}, {3.7453349916116924`*^9, 
   3.745334993564679*^9}, {3.7453355254333935`*^9, 3.745335529417488*^9}, {
   3.745629684762209*^9, 3.7456296870745463`*^9}, {3.7456297647418146`*^9, 
   3.745629767741602*^9}, {3.745854432139015*^9, 3.745854433935768*^9}, {
   3.7458555680293517`*^9, 3.7458555699979596`*^9}, {3.745890386232699*^9, 
   3.7458903885293884`*^9}, {3.7458904818256817`*^9, 
   3.7458904848879776`*^9}, {3.7459404702288475`*^9, 3.74594047479105*^9}, {
   3.7459415906577616`*^9, 3.7459415945324736`*^9}, {3.769548952221299*^9, 
   3.769548954258086*^9}, {3.7695604772790165`*^9, 3.7695604865799*^9}, {
   3.7695607449906645`*^9, 3.769560788462037*^9}, {3.769560860872944*^9, 
   3.7695608735049996`*^9}, {3.7695609096726527`*^9, 
   3.7695609552003813`*^9}, {3.7695611102104664`*^9, 3.769561117350898*^9}, 
   3.769561310435319*^9, {3.769562600903787*^9, 3.7695626311159143`*^9}, {
   3.769562694500603*^9, 3.769562709251665*^9}, {3.769562784143182*^9, 
   3.769562979379527*^9}, {3.7695630347422347`*^9, 3.769563040934803*^9}, {
   3.7695630817112455`*^9, 3.7695631074009004`*^9}, {3.7695632015115833`*^9, 
   3.7695632167758183`*^9}, {3.7695632480630674`*^9, 
   3.7695632791991076`*^9}, {3.769563374041766*^9, 3.769563394600256*^9}, {
   3.7695636692314215`*^9, 3.7695636698434687`*^9}, {3.7695638305901794`*^9, 
   3.7695638400904245`*^9}, {3.769563872732047*^9, 3.7695638872610817`*^9}, {
   3.769563972921286*^9, 3.7695640130428057`*^9}, {3.769564084540665*^9, 
   3.7695641233238926`*^9}, {3.7695650163417535`*^9, 3.769565030479949*^9}, 
   3.769565136810214*^9, {3.769565292831222*^9, 3.7695652950691957`*^9}, 
   3.769565391478937*^9, {3.769565639534915*^9, 3.7695656766617136`*^9}, {
   3.7695659534544177`*^9, 3.76956598692855*^9}, {3.7695662546669316`*^9, 
   3.76956627186087*^9}, {3.7695663173354692`*^9, 3.769566356038864*^9}, {
   3.769566401572211*^9, 3.7695664222716913`*^9}, {3.769566490902961*^9, 
   3.769566613662311*^9}, {3.7695673534477024`*^9, 3.769567421251074*^9}, {
   3.7695675763899307`*^9, 3.7695675850619273`*^9}, {3.7695677986360927`*^9, 
   3.76956780146841*^9}, {3.769567861581768*^9, 3.7695679306440573`*^9}, 
   3.7695684345561876`*^9, {3.7695684839798985`*^9, 3.769568529470356*^9}, {
   3.769568662090227*^9, 3.7695686647876015`*^9}, {3.769569031220647*^9, 
   3.769569039562205*^9}, 3.7695929855145264`*^9, 3.769593206294613*^9, {
   3.769724927082841*^9, 3.76972494518482*^9}, {3.769725094432623*^9, 
   3.769725124192979*^9}, {3.7697251547809377`*^9, 3.7697252455827537`*^9}, {
   3.769725280106336*^9, 3.769725291632368*^9}, {3.7697253379709883`*^9, 
   3.76972536381136*^9}, {3.7697254798732743`*^9, 3.7697255028180933`*^9}, {
   3.7697255722146626`*^9, 3.7697255885936337`*^9}, {3.7697256762011223`*^9, 
   3.7697257071601286`*^9}, 3.769725758288194*^9, 3.7697261689961157`*^9, 
   3.7697267905732493`*^9, {3.769727906612611*^9, 3.7697279452524333`*^9}, {
   3.7697279785395765`*^9, 3.769728072521365*^9}, {3.791894255635097*^9, 
   3.791894262961523*^9}, 3.791894508201948*^9, {3.791894616916238*^9, 
   3.791894618252187*^9}},ExpressionUUID->"a2a7c71c-b98c-406c-9b4d-\
4c29b8976d31"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"PutArmsDown", "[", "]"}], " ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "n", ",", " ", "sides", ",", " ", "arms", ",", " ", "R", ",", " ", 
        "total", ",", " ", "pt", ",", " ", "ang", ",", " ", "p", ",", " ", 
        "i", ",", " ", "ind", ",", " ", "L"}], "}"}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"sides", " ", "=", " ", 
        RowBox[{"{", 
         RowBox[{"\"\<l.arm.\>\"", ",", " ", "\"\<r.arm.\>\""}], "}"}]}], ";",
        "\[IndentingNewLine]", 
       RowBox[{"arms", " ", "=", " ", 
        RowBox[{"{", 
         RowBox[{
         "\"\<ely\>\"", ",", " ", "\"\<elx\>\"", ",", " ", "\"\<wry\>\"", ",",
           " ", "\"\<wrx\>\""}], "}"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"L", " ", "=", " ", 
        RowBox[{"atlas", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", 
          RowBox[{"RBDindex", "[", "\"\<n\>\"", "]"}]}], 
         "\[RightDoubleBracket]"}]}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"Do", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"total", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
          RowBox[{"Do", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{
             RowBox[{"n", " ", "=", " ", 
              RowBox[{"s", " ", "<>", " ", "a"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"(*", " ", 
              RowBox[{"find", " ", "link"}], " ", "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"i", " ", "=", " ", 
              RowBox[{
               RowBox[{"Position", "[", 
                RowBox[{"L", ",", " ", "n"}], "]"}], "\[LeftDoubleBracket]", 
               RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"(*", " ", 
              RowBox[{"find", " ", "parent"}], " ", "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"p", " ", "=", " ", 
              RowBox[{
               RowBox[{"Position", "[", 
                RowBox[{"L", ",", " ", 
                 RowBox[{"atlas", "\[LeftDoubleBracket]", 
                  RowBox[{"i", ",", " ", 
                   RowBox[{"RBDindex", "[", "\"\<p\>\"", "]"}]}], 
                  "\[RightDoubleBracket]"}]}], "]"}], "\[LeftDoubleBracket]", 
               RowBox[{"1", ",", "1"}], "\[RightDoubleBracket]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"ind", " ", "=", " ", 
              RowBox[{"RBDindex", "[", "\"\<f[xyz]\>\"", "]"}]}], ";", 
             "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"(*", " ", 
              RowBox[{"get", " ", "link", " ", "frame"}], " ", "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"pt", " ", "=", " ", 
              RowBox[{"atlas", "\[LeftDoubleBracket]", 
               RowBox[{"i", ",", " ", "ind"}], "\[RightDoubleBracket]"}]}], 
             ";", "\[IndentingNewLine]", 
             RowBox[{"R", " ", "=", " ", 
              RowBox[{"RigidBodyDynamics`Private`rotX", "[", "total", "]"}]}],
              ";", "\[IndentingNewLine]", 
             RowBox[{"pt", " ", "=", " ", 
              RowBox[{"RigidBodyDynamics`Private`MovePoint", "[", 
               RowBox[{"R", ",", " ", "pt"}], "]"}]}], ";", 
             "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"ang", " ", "=", " ", 
              RowBox[{"ArcCos", "[", 
               RowBox[{
                RowBox[{"Dot", "[", 
                 RowBox[{"pt", ",", " ", 
                  RowBox[{"{", 
                   RowBox[{"0", ",", "0", ",", 
                    RowBox[{"-", "1"}]}], "}"}]}], "]"}], "/", 
                RowBox[{"Norm", "[", "pt", "]"}]}], "]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"ang", " ", "=", " ", 
              RowBox[{
               RowBox[{"-", 
                RowBox[{"Sign", "[", 
                 RowBox[{
                 "pt", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}],
                  "]"}]}], " ", "ang"}]}], ";", "\[IndentingNewLine]", 
             "\[IndentingNewLine]", 
             RowBox[{"(*", " ", 
              RowBox[{"add", " ", "RX", " ", "rotation"}], " ", "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"ind", " ", "=", " ", 
              RowBox[{
               RowBox[{"RBDindex", "[", "\"\<f\>\"", "]"}], 
               "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"atlas", "\[LeftDoubleBracket]", 
               RowBox[{"p", ",", " ", "ind"}], "\[RightDoubleBracket]"}], " ",
               "=", " ", "ang"}], ";", "\[IndentingNewLine]", 
             "\[IndentingNewLine]", 
             RowBox[{"(*", " ", 
              RowBox[{"update", " ", "absolute", " ", "angle"}], " ", "*)"}], 
             "\[IndentingNewLine]", 
             RowBox[{"total", " ", "=", " ", 
              RowBox[{"total", " ", "+", " ", "ang"}]}], ";"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"a", ",", " ", "arms"}], "}"}]}], "\[IndentingNewLine]", 
           "]"}], ";"}], ",", "\[IndentingNewLine]", 
         RowBox[{"{", 
          RowBox[{"s", ",", " ", "sides"}], "}"}]}], "\[IndentingNewLine]", 
        "]"}], ";"}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"SetAttributes", "[", 
   RowBox[{"POI", ",", " ", "Listable"}], "]"}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"POI", "[", "n_", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"i", ",", " ", "c", ",", " ", "poi"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"i", " ", "=", " ", 
       RowBox[{"Position", "[", 
        RowBox[{
         RowBox[{"atlas", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", " ", 
           RowBox[{"RBDindex", "[", "\"\<n\>\"", "]"}]}], 
          "\[RightDoubleBracket]"}], ",", " ", "n"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "i"}], " ", "\[Equal]", " ", "0"}], ",", " ", 
        RowBox[{"Return", "[", "]"}]}], "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"i", " ", "=", " ", 
       RowBox[{"i", "\[LeftDoubleBracket]", 
        RowBox[{"1", ",", " ", "1"}], "\[RightDoubleBracket]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{"get", " ", "the", " ", "child", " ", "link"}], " ", "*)"}], 
      "\[IndentingNewLine]", 
      RowBox[{"c", " ", "=", " ", 
       RowBox[{"Position", "[", 
        RowBox[{
         RowBox[{"atlas", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", " ", 
           RowBox[{"RBDindex", "[", "\"\<p\>\"", "]"}]}], 
          "\[RightDoubleBracket]"}], ",", " ", "n"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "@", "c"}], " ", "\[Equal]", " ", "0"}], ",", " ", 
        "\[IndentingNewLine]", 
        RowBox[{"(*", " ", 
         RowBox[{"get", " ", 
          RowBox[{"point", " ", "@", " ", "com"}]}], " ", "*)"}], 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"poi", " ", "=", " ", 
          RowBox[{"atlas", "\[LeftDoubleBracket]", 
           RowBox[{"i", ",", " ", 
            RowBox[{"RBDindex", "[", "\"\<c\>\"", "]"}]}], 
           "\[RightDoubleBracket]"}]}], ";"}], ",", "\[IndentingNewLine]", 
        RowBox[{"(*", " ", 
         RowBox[{"get", " ", 
          RowBox[{"point", " ", "@", " ", "end"}], " ", "of", " ", "link"}], 
         " ", "*)"}], "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"c", " ", "=", " ", 
          RowBox[{"c", "\[LeftDoubleBracket]", 
           RowBox[{"1", ",", " ", "1"}], "\[RightDoubleBracket]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"poi", " ", "=", " ", 
          RowBox[{"atlas", "\[LeftDoubleBracket]", 
           RowBox[{"c", ",", " ", 
            RowBox[{"RBDindex", "[", "\"\<f\>\"", "]"}]}], 
           "\[RightDoubleBracket]"}]}], ";"}]}], "\[IndentingNewLine]", "]"}],
       ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"n", ",", " ", 
        RowBox[{"poi", "\[LeftDoubleBracket]", 
         RowBox[{"4", ";;", "6"}], "\[RightDoubleBracket]"}]}], "}"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True,
 CellChangeTimes->{
  3.5935373428029976`*^9, {3.599096229670998*^9, 3.5990962315031023`*^9}, {
   3.5990973722864313`*^9, 3.5990973743115473`*^9}, {3.5990977857511063`*^9, 
   3.5990977884552603`*^9}, {3.599097878127395*^9, 3.599097884591765*^9}, 
   3.610730407934533*^9, 3.6108796050389833`*^9, {3.6108799870665703`*^9, 
   3.6108799920658565`*^9}, 3.610886988825547*^9, {3.610887290282818*^9, 
   3.610887293852005*^9}, {3.6115435505387526`*^9, 3.611543550882502*^9}, {
   3.6144680163360963`*^9, 3.6144680166921177`*^9}, {3.614612256783276*^9, 
   3.614612264488721*^9}, {3.6146503166187773`*^9, 3.6146503240250463`*^9}, 
   3.614698151439081*^9, 3.6146993110312667`*^9, {3.6148505790265408`*^9, 
   3.6148505871046953`*^9}, {3.615552151358158*^9, 3.6155521559987936`*^9}, 
   3.6155534773451247`*^9, 3.6155555089115314`*^9, {3.6518501104720335`*^9, 
   3.6518501191752105`*^9}, {3.6518643470814667`*^9, 3.6518643506284266`*^9}, 
   3.6821852962309294`*^9, {3.6822070217291737`*^9, 3.6822070406199827`*^9}, 
   3.6822767461204205`*^9, {3.682288801921726*^9, 3.682288802564524*^9}, 
   3.682289350429621*^9, {3.6822901967268214`*^9, 3.6822901972038193`*^9}, {
   3.6822919812224684`*^9, 3.6822919841445484`*^9}, {3.6823572575635753`*^9, 
   3.6823572608512945`*^9}, 3.68235763607275*^9, 3.682357815668155*^9, {
   3.6960746887804403`*^9, 3.6960746950773716`*^9}, {3.696122958715283*^9, 
   3.696122996843132*^9}, 3.6961231543613205`*^9, {3.696123426580105*^9, 
   3.6961234281985664`*^9}, {3.6961234691755657`*^9, 3.696123494396863*^9}, {
   3.6961235396177387`*^9, 3.696123576768961*^9}, {3.696123781697255*^9, 
   3.696123784675712*^9}, {3.6961238578221273`*^9, 3.6961239125797276`*^9}, {
   3.6961240474942193`*^9, 3.696124091945079*^9}, {3.696125840131276*^9, 
   3.6961259045366697`*^9}, 3.696128497378868*^9, 3.6961289190688977`*^9, {
   3.696129085282256*^9, 3.6961291041594057`*^9}, 3.6963339513244658`*^9, {
   3.696335379405243*^9, 3.69633538572027*^9}, {3.696335874940115*^9, 
   3.696335911669161*^9}, {3.696337109027116*^9, 3.696337115048519*^9}, {
   3.696345751353446*^9, 3.696345754211932*^9}, 3.696346669071505*^9, {
   3.696347038168556*^9, 3.696347041548943*^9}, {3.6963480069259634`*^9, 
   3.6963480103933997`*^9}, {3.6967663265731754`*^9, 3.69676633713795*^9}, {
   3.6967664105302277`*^9, 3.6967664135226336`*^9}, {3.7021246717720766`*^9, 
   3.7021246935535507`*^9}, {3.7021248985879602`*^9, 3.702124907884925*^9}, {
   3.702127089885914*^9, 3.702127090307787*^9}, {3.702127452805009*^9, 
   3.7021274600923667`*^9}, {3.7100960922192497`*^9, 3.710096108156515*^9}, {
   3.7100962719983573`*^9, 3.71009627471226*^9}, {3.710096324196254*^9, 
   3.7100963377137985`*^9}, 3.7101227504913225`*^9, {3.7101228917944403`*^9, 
   3.7101228983566914`*^9}, {3.710126246172827*^9, 3.7101263185059605`*^9}, {
   3.7101263543282847`*^9, 3.710126365690318*^9}, 3.7101271941591244`*^9, 
   3.7101284314538555`*^9, 3.7102510519733486`*^9, {3.710541419068189*^9, 
   3.710541449490366*^9}, 3.710542049339803*^9, 3.7105421391531744`*^9, 
   3.7137450210156364`*^9, 3.7171710669765606`*^9, {3.717171123226927*^9, 
   3.7171711234613156`*^9}, {3.7171711993993807`*^9, 3.717171299900145*^9}, {
   3.7171721206980195`*^9, 3.7171721307918468`*^9}, {3.717172164276474*^9, 
   3.7171721676046257`*^9}, {3.717174156280943*^9, 3.7171741738435593`*^9}, 
   3.7177806699586153`*^9, {3.717780703787053*^9, 3.717780708472043*^9}, {
   3.717910616979868*^9, 3.7179106214642763`*^9}, {3.7179106941308737`*^9, 
   3.7179106958027554`*^9}, {3.7179107295925865`*^9, 3.717910760686614*^9}, {
   3.7179108023122725`*^9, 3.7179108059216805`*^9}, 3.717911046125701*^9, {
   3.717912011571754*^9, 3.7179120127123795`*^9}, {3.717913044201214*^9, 
   3.717913057029476*^9}, 3.7179139057875443`*^9, {3.7179351792300634`*^9, 
   3.7179352029021487`*^9}, {3.7187620780780096`*^9, 3.7187620786405325`*^9}, 
   3.7187900474816947`*^9, {3.719110303428886*^9, 3.719110304850775*^9}, {
   3.720807308859977*^9, 3.720807309313103*^9}, 3.720807665913802*^9, {
   3.7208077101173177`*^9, 3.7208077105548368`*^9}, {3.7208077453988905`*^9, 
   3.7208077775554447`*^9}, {3.7208078150088997`*^9, 
   3.7208078655093765`*^9}, {3.7208078958065133`*^9, 3.720807907947259*^9}, 
   3.7208109208454204`*^9, 3.7208109985492496`*^9, 3.7208115684138107`*^9, {
   3.720859265322398*^9, 3.7208594424424047`*^9}, {3.7208595216617866`*^9, 
   3.720859523693053*^9}, {3.7208595641308784`*^9, 3.7208596068968415`*^9}, {
   3.72085971238206*^9, 3.720859716960221*^9}, {3.720859852836305*^9, 
   3.720859948464904*^9}, {3.7208601994668913`*^9, 3.7208602237639723`*^9}, {
   3.720870297153281*^9, 3.720870370544492*^9}, {3.7208704053416576`*^9, 
   3.7208704056072736`*^9}, {3.72087044507635*^9, 3.7208704649827585`*^9}, {
   3.7225637771669884`*^9, 3.7225637840264025`*^9}, {3.7694336114636407`*^9, 
   3.7694336131101074`*^9}, {3.7694338066138177`*^9, 
   3.7694338074004555`*^9}, {3.769434519809497*^9, 3.7694345203599997`*^9}, {
   3.7694347139318666`*^9, 3.7694347618957195`*^9}, {3.769435307847103*^9, 
   3.769435309310543*^9}, {3.7694354697949104`*^9, 3.7694355711800175`*^9}, {
   3.769435618656479*^9, 3.76943570467447*^9}, {3.76943574574578*^9, 
   3.7694358214716682`*^9}, {3.769435875922529*^9, 3.7694358803989854`*^9}, {
   3.769435914917807*^9, 3.769435915621876*^9}, {3.7694360663610897`*^9, 
   3.76943606887138*^9}, 3.769436251792292*^9, 3.7694363970112696`*^9, {
   3.7694365758705077`*^9, 3.769436578630512*^9}, 3.769436767366269*^9, 
   3.7694368476940784`*^9, 3.769436910978484*^9, 3.7694370326875906`*^9, {
   3.7694373351179132`*^9, 3.7694374782968254`*^9}, {3.769441459567699*^9, 
   3.7694414729484234`*^9}, 3.769441590901359*^9, {3.769441955621648*^9, 
   3.7694419622266216`*^9}, 3.769441997596669*^9, {3.769442176069166*^9, 
   3.7694421986548314`*^9}, {3.7694423354224524`*^9, 3.769442357233846*^9}, {
   3.769442596881096*^9, 3.769442603355898*^9}, {3.7694607375261016`*^9, 
   3.769460876444314*^9}, {3.7694609570074253`*^9, 3.7694609603222265`*^9}, {
   3.7694610739734926`*^9, 3.7694610841562505`*^9}, {3.769461115199644*^9, 
   3.7694611330505805`*^9}, 3.769461217672491*^9, {3.7694615129966435`*^9, 
   3.769461571525552*^9}, {3.7694617357806773`*^9, 3.7694617953624587`*^9}, 
   3.7694619054853196`*^9, 3.76946287242949*^9, 3.7694629992239685`*^9, {
   3.769474993653045*^9, 3.76947499512246*^9}, {3.7694750418296595`*^9, 
   3.769475166401886*^9}, {3.7694754536784234`*^9, 3.7694755215601993`*^9}, {
   3.7694758050435095`*^9, 3.76947582028864*^9}, {3.769476228119714*^9, 
   3.769476333556689*^9}, {3.7694763644163084`*^9, 3.769476366766329*^9}, {
   3.769476415158779*^9, 3.7694764292430344`*^9}, {3.7694764739721355`*^9, 
   3.7694766681594276`*^9}, {3.7694768704185553`*^9, 3.769476930389185*^9}, {
   3.7694769973537264`*^9, 3.7694770249796004`*^9}, 3.769477231615326*^9, {
   3.7694773609471292`*^9, 3.76947738843989*^9}, {3.76947742046657*^9, 
   3.7694774876614904`*^9}, {3.769477696865721*^9, 3.769477731150736*^9}, {
   3.7694778168634973`*^9, 3.769477842976406*^9}, {3.769477897846232*^9, 
   3.7694779397028008`*^9}, {3.769477992392773*^9, 3.769478063747263*^9}, {
   3.7694781056376843`*^9, 3.7694781127832546`*^9}, {3.769478164062438*^9, 
   3.7694781644259853`*^9}, {3.7694785496097555`*^9, 
   3.7694787385419827`*^9}, {3.7694788312168055`*^9, 3.769478831892275*^9}, {
   3.7694788809556537`*^9, 3.769478891908664*^9}, {3.7695084572901134`*^9, 
   3.769508465508277*^9}, {3.7695085488661804`*^9, 3.769508569349067*^9}, {
   3.7695086015447874`*^9, 3.7695086017947683`*^9}, {3.7695086377608795`*^9, 
   3.7695086617903533`*^9}, {3.769508832458203*^9, 3.7695088342393217`*^9}, {
   3.7695092931703176`*^9, 3.769509293826519*^9}, {3.769559828679067*^9, 
   3.769559830851629*^9}, {3.7695598879311304`*^9, 3.769559903538791*^9}, {
   3.769559944752531*^9, 3.769560020641056*^9}, {3.7695600812591896`*^9, 
   3.7695600952902584`*^9}, {3.7695601355316725`*^9, 
   3.7695601392653894`*^9}, {3.7695601925722265`*^9, 3.7695602130823846`*^9}, 
   3.7695602439012384`*^9, {3.7695603261931167`*^9, 3.769560396193673*^9}, {
   3.7695604285726633`*^9, 3.7695604376721983`*^9}, {3.7695604698899565`*^9, 
   3.769560470680472*^9}, {3.769727562700552*^9, 3.769727623924009*^9}, {
   3.769727683709007*^9, 3.769727687972528*^9}, {3.769727765796872*^9, 
   3.769727785110465*^9}, {3.7697278349422507`*^9, 
   3.7697278656017623`*^9}},ExpressionUUID->"f51e6109-02eb-4069-99ec-\
dc95bd593ccd"],

Cell[BoxData[
 RowBox[{
  RowBox[{"FootPOI", "[", "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{
     "toe", ",", " ", "heel", ",", " ", "wt", ",", " ", "wh", ",", " ", "h"}],
      "}"}], ",", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"{", 
       RowBox[{"toe", ",", " ", "heel"}], "}"}], " ", "=", " ", 
      RowBox[{
       RowBox[{"GetFootData", "[", "]"}], "\[LeftDoubleBracket]", 
       RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Join", "@@", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{"i", ",", " ", "#"}], "}"}], "&"}], " ", "/@", " ", 
         RowBox[{"{", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"{", 
            RowBox[{
             RowBox[{
             "toe", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
             ",", " ", 
             RowBox[{
              RowBox[{"-", 
               RowBox[{
               "toe", "\[LeftDoubleBracket]", "2", 
                "\[RightDoubleBracket]"}]}], "/", "2"}], ",", " ", 
             RowBox[{
             "toe", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}], 
            "}"}], ",", " ", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
             "toe", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
             ",", " ", 
             RowBox[{
              RowBox[{
              "toe", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}], 
              "/", "2"}], ",", " ", 
             RowBox[{
             "toe", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}], 
            "}"}], ",", " ", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
             "heel", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
             ",", " ", 
             RowBox[{
              RowBox[{"-", 
               RowBox[{
               "heel", "\[LeftDoubleBracket]", "2", 
                "\[RightDoubleBracket]"}]}], "/", "2"}], ",", " ", 
             RowBox[{
             "heel", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}],
             "}"}], ",", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
             "heel", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], 
             ",", " ", 
             RowBox[{
              RowBox[{
              "heel", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}], 
              "/", "2"}], ",", " ", 
             RowBox[{
             "heel", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}]}],
             "}"}]}], "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"i", ",", " ", 
          RowBox[{"{", 
           RowBox[{"\"\<l.leg.akx\>\"", ",", " ", "\"\<r.leg.akx\>\""}], 
           "}"}]}], "}"}]}], "\[IndentingNewLine]", "]"}]}]}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True,
 CellChangeTimes->{
  3.5935373428029976`*^9, {3.599096229670998*^9, 3.5990962315031023`*^9}, {
   3.5990973722864313`*^9, 3.5990973743115473`*^9}, {3.5990977857511063`*^9, 
   3.5990977884552603`*^9}, {3.599097878127395*^9, 3.599097884591765*^9}, 
   3.610730407934533*^9, 3.6108796050389833`*^9, {3.6108799870665703`*^9, 
   3.6108799920658565`*^9}, 3.610886988825547*^9, {3.610887290282818*^9, 
   3.610887293852005*^9}, {3.6115435505387526`*^9, 3.611543550882502*^9}, {
   3.6144680163360963`*^9, 3.6144680166921177`*^9}, {3.614612256783276*^9, 
   3.614612264488721*^9}, {3.6146503166187773`*^9, 3.6146503240250463`*^9}, 
   3.614698151439081*^9, 3.6146993110312667`*^9, {3.6148505790265408`*^9, 
   3.6148505871046953`*^9}, {3.615552151358158*^9, 3.6155521559987936`*^9}, 
   3.6155534773451247`*^9, 3.6155555089115314`*^9, {3.6518501104720335`*^9, 
   3.6518501191752105`*^9}, {3.6518643470814667`*^9, 3.6518643506284266`*^9}, 
   3.6821852962309294`*^9, {3.6822070217291737`*^9, 3.6822070406199827`*^9}, 
   3.6822767461204205`*^9, {3.682288801921726*^9, 3.682288802564524*^9}, 
   3.682289350429621*^9, {3.6822901967268214`*^9, 3.6822901972038193`*^9}, {
   3.6822919812224684`*^9, 3.6822919841445484`*^9}, {3.6823572575635753`*^9, 
   3.6823572608512945`*^9}, 3.68235763607275*^9, 3.682357815668155*^9, {
   3.6960746887804403`*^9, 3.6960746950773716`*^9}, {3.696122958715283*^9, 
   3.696122996843132*^9}, 3.6961231543613205`*^9, {3.696123426580105*^9, 
   3.6961234281985664`*^9}, {3.6961234691755657`*^9, 3.696123494396863*^9}, {
   3.6961235396177387`*^9, 3.696123576768961*^9}, {3.696123781697255*^9, 
   3.696123784675712*^9}, {3.6961238578221273`*^9, 3.6961239125797276`*^9}, {
   3.6961240474942193`*^9, 3.696124091945079*^9}, {3.696125840131276*^9, 
   3.6961259045366697`*^9}, 3.696128497378868*^9, 3.6961289190688977`*^9, {
   3.696129085282256*^9, 3.6961291041594057`*^9}, 3.6963339513244658`*^9, {
   3.696335379405243*^9, 3.69633538572027*^9}, {3.696335874940115*^9, 
   3.696335911669161*^9}, {3.696337109027116*^9, 3.696337115048519*^9}, {
   3.696345751353446*^9, 3.696345754211932*^9}, 3.696346669071505*^9, {
   3.696347038168556*^9, 3.696347041548943*^9}, {3.6963480069259634`*^9, 
   3.6963480103933997`*^9}, {3.6967663265731754`*^9, 3.69676633713795*^9}, {
   3.6967664105302277`*^9, 3.6967664135226336`*^9}, {3.7021246717720766`*^9, 
   3.7021246935535507`*^9}, {3.7021248985879602`*^9, 3.702124907884925*^9}, {
   3.702127089885914*^9, 3.702127090307787*^9}, {3.702127452805009*^9, 
   3.7021274600923667`*^9}, {3.7100960922192497`*^9, 3.710096108156515*^9}, {
   3.7100962719983573`*^9, 3.71009627471226*^9}, {3.710096324196254*^9, 
   3.7100963377137985`*^9}, 3.7101227504913225`*^9, {3.7101228917944403`*^9, 
   3.7101228983566914`*^9}, {3.710126246172827*^9, 3.7101263185059605`*^9}, {
   3.7101263543282847`*^9, 3.710126365690318*^9}, 3.7101271941591244`*^9, 
   3.7101284314538555`*^9, 3.7102510519733486`*^9, {3.710541419068189*^9, 
   3.710541449490366*^9}, 3.710542049339803*^9, 3.7105421391531744`*^9, 
   3.7137450210156364`*^9, 3.7171710669765606`*^9, {3.717171123226927*^9, 
   3.7171711234613156`*^9}, {3.7171711993993807`*^9, 3.717171299900145*^9}, {
   3.7171721206980195`*^9, 3.7171721307918468`*^9}, {3.717172164276474*^9, 
   3.7171721676046257`*^9}, {3.717174156280943*^9, 3.7171741738435593`*^9}, 
   3.7177806699586153`*^9, {3.717780703787053*^9, 3.717780708472043*^9}, {
   3.717910616979868*^9, 3.7179106214642763`*^9}, {3.7179106941308737`*^9, 
   3.7179106958027554`*^9}, {3.7179107295925865`*^9, 3.717910760686614*^9}, {
   3.7179108023122725`*^9, 3.7179108059216805`*^9}, 3.717911046125701*^9, {
   3.717912011571754*^9, 3.7179120127123795`*^9}, {3.717913044201214*^9, 
   3.717913057029476*^9}, 3.7179139057875443`*^9, {3.7179351792300634`*^9, 
   3.7179352029021487`*^9}, {3.7187620780780096`*^9, 3.7187620786405325`*^9}, 
   3.7187900474816947`*^9, {3.719110303428886*^9, 3.719110304850775*^9}, {
   3.720807308859977*^9, 3.720807309313103*^9}, 3.720807665913802*^9, {
   3.7208077101173177`*^9, 3.7208077105548368`*^9}, {3.7208077453988905`*^9, 
   3.7208077775554447`*^9}, {3.7208078150088997`*^9, 
   3.7208078655093765`*^9}, {3.7208078958065133`*^9, 3.720807907947259*^9}, 
   3.7208109208454204`*^9, 3.7208109985492496`*^9, 3.7208115684138107`*^9, {
   3.720859265322398*^9, 3.7208594424424047`*^9}, {3.7208595216617866`*^9, 
   3.720859523693053*^9}, {3.7208595641308784`*^9, 3.7208596068968415`*^9}, {
   3.72085971238206*^9, 3.720859716960221*^9}, {3.720859852836305*^9, 
   3.720859948464904*^9}, {3.7208601994668913`*^9, 3.7208602237639723`*^9}, {
   3.720870297153281*^9, 3.720870370544492*^9}, {3.7208704053416576`*^9, 
   3.7208704056072736`*^9}, {3.72087044507635*^9, 3.7208704649827585`*^9}, {
   3.7225637771669884`*^9, 3.722563861086872*^9}, {3.7225639208685865`*^9, 
   3.7225640350882764`*^9}, {3.722564451061462*^9, 3.722564456202114*^9}, {
   3.7225644927961717`*^9, 3.7225645960594273`*^9}, {3.7225647639826126`*^9, 
   3.7225647909359508`*^9}, {3.722564855530233*^9, 3.7225648860929766`*^9}, 
   3.722564941374668*^9, 3.7225661827159414`*^9, {3.7225668610507793`*^9, 
   3.7225668785665483`*^9}, 3.722567033708412*^9, {3.722567488524541*^9, 
   3.7225675191024933`*^9}, 3.722567762041916*^9, 3.7225678328706083`*^9, 
   3.7225678717459297`*^9, {3.7225679258244905`*^9, 3.7225679276213636`*^9}, {
   3.72256825778025*^9, 3.7225682639365597`*^9}, {3.7225683318902144`*^9, 
   3.7225683360465007`*^9}, {3.7225998910717783`*^9, 3.722599913228209*^9}, {
   3.723951785645305*^9, 3.7239517914542656`*^9}, {3.723955304764162*^9, 
   3.723955314920496*^9}, 3.7239554306556807`*^9, {3.7267995620500135`*^9, 
   3.726799569018818*^9}, 3.726799684069274*^9, 3.769727672364605*^9, {
   3.791245236202341*^9, 3.791245266207616*^9}, {3.7912453177727547`*^9, 
   3.79124531823339*^9}, {3.791245353836331*^9, 3.791245355120281*^9}, {
   3.791245395484559*^9, 3.791245415440699*^9}, {3.7912454546412582`*^9, 
   3.791245455113908*^9}, {3.791245553531094*^9, 3.7912456116630487`*^9}, {
   3.791246665422194*^9, 3.791246818299397*^9}, 3.791247139219233*^9, {
   3.799723200434408*^9, 
   3.799723201221726*^9}},ExpressionUUID->"3503542b-100d-4364-8318-\
6565eccaeeae"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"GetFootData", "[", "]"}], " ", ":=", " ", 
  RowBox[{"Module", "[", 
   RowBox[{
    RowBox[{"{", 
     RowBox[{"box", ",", " ", "h", ",", " ", "toe", ",", " ", "heel"}], "}"}],
     ",", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", 
     RowBox[{"get", " ", "bottom", " ", "four", " ", "corners"}], " ", "*)"}],
     "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"box", " ", "=", " ", 
      RowBox[{"MinimalBy", "[", 
       RowBox[{"coordsDAE", ",", " ", 
        RowBox[{
         RowBox[{"#", "\[LeftDoubleBracket]", "3", "\[RightDoubleBracket]"}], 
         "&"}], ",", " ", "32"}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"box", " ", "=", " ", 
      RowBox[{"Join", "[", 
       RowBox[{
        RowBox[{"MinimalBy", "[", 
         RowBox[{"box", ",", " ", 
          RowBox[{
           RowBox[{
           "#", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], "&"}],
           ",", " ", "6"}], "]"}], ",", " ", 
        RowBox[{"MaximalBy", "[", 
         RowBox[{"box", ",", " ", 
          RowBox[{
           RowBox[{
           "#", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], "&"}],
           ",", " ", "6"}], "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
     RowBox[{"box", " ", "=", " ", 
      RowBox[{"DeleteDuplicates", "[", 
       RowBox[{"box", ",", " ", 
        RowBox[{
         RowBox[{
          RowBox[{"Norm", "[", 
           RowBox[{"#1", "-", "#2"}], "]"}], "\[LessEqual]", " ", 
          RowBox[{"10", "^", 
           RowBox[{"-", "6"}]}]}], "&"}]}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"box", " ", "=", " ", 
      RowBox[{"Join", "[", 
       RowBox[{
        RowBox[{"MinimalBy", "[", 
         RowBox[{"box", ",", " ", 
          RowBox[{
           RowBox[{
           "#", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}], "&"}],
           ",", " ", "2"}], "]"}], ",", " ", 
        RowBox[{"MaximalBy", "[", 
         RowBox[{"box", ",", " ", 
          RowBox[{
           RowBox[{
           "#", "\[LeftDoubleBracket]", "2", "\[RightDoubleBracket]"}], "&"}],
           ",", " ", "2"}], "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "sort", " ", "heel", " ", "coords", " ", "then", " ", "toe", " ", 
       "coords"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"box", " ", "=", " ", 
      RowBox[{"SortBy", "[", 
       RowBox[{"box", ",", " ", "First"}], "]"}]}], ";", 
     "\[IndentingNewLine]", 
     RowBox[{"h", " ", "=", " ", 
      RowBox[{"Mean", "@", 
       RowBox[{"box", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "3"}], "\[RightDoubleBracket]"}]}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"heel", " ", "=", " ", 
       RowBox[{"(", 
        RowBox[{"heel", ",", " ", "wh", ",", " ", "h"}], ")"}]}], " ", "*)"}],
      "\[IndentingNewLine]", 
     RowBox[{"heel", " ", "=", " ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Mean", "@", 
         RowBox[{"box", "\[LeftDoubleBracket]", 
          RowBox[{
           RowBox[{"1", ";;", "2"}], ",", " ", "1"}], 
          "\[RightDoubleBracket]"}]}], ",", " ", 
        RowBox[{"Total", "@", 
         RowBox[{"Abs", "@", 
          RowBox[{"box", "\[LeftDoubleBracket]", 
           RowBox[{
            RowBox[{"1", ";;", "2"}], ",", " ", "2"}], 
           "\[RightDoubleBracket]"}]}]}], ",", " ", "h"}], "}"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", "toe", " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"toe", " ", "=", " ", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Mean", "@", 
         RowBox[{"box", "\[LeftDoubleBracket]", 
          RowBox[{
           RowBox[{"3", ";;", "4"}], ",", " ", "1"}], 
          "\[RightDoubleBracket]"}]}], ",", " ", 
        RowBox[{"Total", "@", 
         RowBox[{"Abs", "@", 
          RowBox[{"box", "\[LeftDoubleBracket]", 
           RowBox[{
            RowBox[{"3", ";;", "4"}], ",", " ", "2"}], 
           "\[RightDoubleBracket]"}]}]}], ",", " ", "h"}], "}"}]}], ";", 
     "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
       RowBox[{"x", " ", "left", " ", "to", " ", "right"}], ",", " ", 
       RowBox[{"y", " ", "into", " ", "screen"}], ",", " ", 
       RowBox[{"z", " ", "up"}]}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"{", 
      RowBox[{"toe", ",", " ", "heel", ",", " ", 
       RowBox[{"Show", "[", 
        RowBox[{"{", 
         RowBox[{"footDAE", ",", " ", 
          RowBox[{"Graphics3D", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"PointSize", "@", "0.01"}], ",", " ", "Red", ",", " ", 
             RowBox[{"Point", "[", "z3", "]"}]}], "}"}], "]"}], ",", " ", 
          RowBox[{"Graphics3D", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"PointSize", "@", "0.01"}], ",", " ", "Blue", ",", " ", 
             RowBox[{"Point", "[", 
              RowBox[{"box", "\[LeftDoubleBracket]", 
               RowBox[{"1", ";;", "2"}], "\[RightDoubleBracket]"}], "]"}], 
             ",", " ", "Green", ",", " ", 
             RowBox[{"Point", "[", 
              RowBox[{"box", "\[LeftDoubleBracket]", 
               RowBox[{"3", ";;", "4"}], "\[RightDoubleBracket]"}], "]"}]}], 
            "}"}], "]"}]}], "}"}], "]"}]}], "}"}]}]}], "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.791245635610417*^9, 3.791245915487582*^9}, {
  3.791245945553855*^9, 3.791245992880232*^9}, {3.791246129184168*^9, 
  3.7912462165448017`*^9}, {3.791246330973339*^9, 3.791246345097843*^9}, {
  3.791246385635248*^9, 3.79124638852607*^9}, {3.791246418952663*^9, 
  3.791246451396962*^9}, {3.791246585201271*^9, 3.791246611514642*^9}, {
  3.791246849056575*^9, 
  3.791246849437767*^9}},ExpressionUUID->"90a28496-5e1b-46d4-aa3a-\
b0144a6322e0"]
}, Open  ]],

Cell[CellGroupData[{

Cell["End Package", "Section",
 InitializationCell->True,
 CellChangeTimes->{{3.5914870039053636`*^9, 3.591487004222381*^9}, {
  3.672922910157816*^9, 
  3.6729229104546924`*^9}},ExpressionUUID->"39ea531a-559a-49cc-aad2-\
bdcbf6dec132"],

Cell[BoxData[{
 RowBox[{"End", "[", "]"}], "\n", 
 RowBox[{"EndPackage", "[", "]"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.6729231090809507`*^9, 3.6729231097997046`*^9}},
 CellLabel->
  "In[4582]:=",ExpressionUUID->"2d347607-a447-4fd8-9424-96ecf5aa99fd"]
}, Open  ]]
},
AutoGeneratedPackage->Automatic,
WindowSize->{1373, 1505},
WindowMargins->{{0, Automatic}, {0, Automatic}},
FrontEndVersion->"11.3 for Linux x86 (64-bit) (March 6, 2018)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 160, 3, 95, "Section",ExpressionUUID->"c6b6af92-f4bd-411a-be67-ab66a4e5ba29"],
Cell[743, 27, 4300, 64, 222, "Input",ExpressionUUID->"e2c4f744-43d7-494b-a61f-0c759b87e8bb",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[5080, 96, 222, 4, 95, "Section",ExpressionUUID->"02ae3bd0-a21f-4f64-8742-31732e72dafa"],
Cell[5305, 102, 1211, 33, 222, "Input",ExpressionUUID->"49428acc-077f-4f22-b7cf-e7439930b411",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[6553, 140, 188, 3, 95, "Section",ExpressionUUID->"138cb99d-91e5-42e8-8634-7a159af38f6f"],
Cell[CellGroupData[{
Cell[6766, 147, 17884, 372, 3222, "Input",ExpressionUUID->"f06be6d3-18c9-49e1-a8a3-2ef14dac6f16",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True],
Cell[24653, 521, 17573, 343, 1902, "Input",ExpressionUUID->"a2a7c71c-b98c-406c-9b4d-4c29b8976d31",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True],
Cell[42229, 866, 17270, 313, 2102, "Input",ExpressionUUID->"f51e6109-02eb-4069-99ec-dc95bd593ccd",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True],
Cell[59502, 1181, 9459, 168, 502, "Input",ExpressionUUID->"3503542b-100d-4364-8318-6565eccaeeae",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True]
}, Open  ]],
Cell[68976, 1352, 5979, 144, 942, "Input",ExpressionUUID->"90a28496-5e1b-46d4-aa3a-b0144a6322e0",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[74992, 1501, 236, 5, 95, "Section",ExpressionUUID->"39ea531a-559a-49cc-aad2-bdcbf6dec132",
 InitializationCell->True],
Cell[75231, 1508, 276, 6, 102, "Input",ExpressionUUID->"2d347607-a447-4fd8-9424-96ecf5aa99fd",
 InitializationCell->True]
}, Open  ]]
}
]
*)

