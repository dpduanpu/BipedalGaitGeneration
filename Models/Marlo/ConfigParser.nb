(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 11.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     30708,        633]
NotebookOptionsPosition[     29492,        600]
NotebookOutlinePosition[     29888,        617]
CellTagsIndexPosition[     29845,        614]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Begin Package", "Section",
 CellChangeTimes->{{3.5914870039053636`*^9, 
  3.591487004222381*^9}},ExpressionUUID->"3d38ec39-23f1-4d22-b57d-\
1df458897f8c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"BeginPackage", "[", 
   RowBox[{"\"\<BipedalLocomotion`Marlo`\>\"", ",", " ", 
    RowBox[{"{", 
     RowBox[{
     "\"\<GlobalVariables`\>\"", ",", " ", "\"\<RigidBodyDynamics`\>\"", ",", 
      " ", "\"\<BipedalLocomotion`\>\"", ",", " ", 
      "\"\<BipedalLocomotion`Model`\>\""}], "}"}]}], "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"Begin", "[", "\"\<`Private`\>\"", "]"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"data", " ", "=", " ", 
   RowBox[{
    RowBox[{"Import", "[", "\"\<Marlo/marlo-dat.csv\>\"", "]"}], 
    "\[LeftDoubleBracket]", 
    RowBox[{"2", ";;"}], "\[RightDoubleBracket]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{
  3.5844197483839703`*^9, {3.5844250604318256`*^9, 3.5844250721475377`*^9}, {
   3.5844251233785*^9, 3.5844251234877005`*^9}, {3.5844253988774505`*^9, 
   3.5844254390946617`*^9}, {3.5844254919948354`*^9, 3.5844254990149255`*^9}, 
   3.584425543397398*^9, {3.584425574800518*^9, 3.584425581945394*^9}, {
   3.5844256737523947`*^9, 3.5844257230957055`*^9}, {3.5844279668250203`*^9, 
   3.5844279860756264`*^9}, {3.584428374816189*^9, 3.584428378919037*^9}, {
   3.5914865865694637`*^9, 3.591486626255737*^9}, {3.5914867823906765`*^9, 
   3.5914867827646985`*^9}, {3.591486817520689*^9, 3.5914868205858636`*^9}, {
   3.591486965884186*^9, 3.5914869664642324`*^9}, {3.5915022447717495`*^9, 
   3.5915022459698176`*^9}, {3.591542902441803*^9, 3.591542929051241*^9}, {
   3.59154329988008*^9, 3.591543327692632*^9}, 3.5915439898189273`*^9, {
   3.5915443331789765`*^9, 3.5915443348977413`*^9}, {3.591544409656703*^9, 
   3.591544412687962*^9}, {3.591721260928192*^9, 3.591721326772053*^9}, {
   3.5922422663532963`*^9, 3.592242267056429*^9}, {3.5922818277082567`*^9, 
   3.59228183637475*^9}, {3.593367625062662*^9, 3.5933676251720285`*^9}, {
   3.704468357519539*^9, 3.704468459841198*^9}, {3.7044685529026203`*^9, 
   3.704468620873731*^9}, {3.7044692938575964`*^9, 3.704469294201355*^9}, {
   3.7044693718565884`*^9, 3.7044694237922263`*^9}, 3.7044696047095137`*^9, {
   3.704469723121451*^9, 3.7044697494763565`*^9}, {3.7044713775105753`*^9, 
   3.7044713779682055`*^9}, {3.71007627184459*^9, 3.7100763129700594`*^9}, {
   3.710085252492481*^9, 3.710085269273345*^9}, {3.710085701211694*^9, 
   3.710085704820245*^9}, {3.71008573624848*^9, 3.7100857468419538`*^9}, {
   3.7100858618232365`*^9, 3.710085866727702*^9}, {3.710085919261855*^9, 
   3.7100859355283422`*^9}, {3.7100860101270795`*^9, 3.710086010815563*^9}, {
   3.7100862247653303`*^9, 3.7100862253687563`*^9}, {3.7100876279638534`*^9, 
   3.7100876368821716`*^9}, {3.710247193222289*^9, 3.710247196972357*^9}, {
   3.710249077736276*^9, 3.710249078486265*^9}, {3.719112887775036*^9, 
   3.719112914478425*^9}, {3.719112998854257*^9, 3.719113000323023*^9}, {
   3.7191136395085473`*^9, 3.719113649164892*^9}, 3.719114879496228*^9, {
   3.7192011247884035`*^9, 3.7192011277727957`*^9}, {3.7192296580574007`*^9, 
   3.719229673151224*^9}, {3.7192816589156504`*^9, 3.7192816633531713`*^9}, {
   3.7193169534786367`*^9, 3.719316953853657*^9}, {3.719336319403597*^9, 
   3.719336334153718*^9}, {3.7193364584516335`*^9, 3.719336463561051*^9}, {
   3.71950185152522*^9, 3.719501861181549*^9}, {3.7195019833075695`*^9, 
   3.7195020203343954`*^9}, {3.719530068564412*^9, 3.7195300955490136`*^9}, {
   3.7195306954134054`*^9, 3.719530696085286*^9}, {3.7196226368983707`*^9, 
   3.7196226373983574`*^9}, {3.719622769920648*^9, 3.7196227709987993`*^9}, {
   3.719622836655593*^9, 3.7196228393431067`*^9}, {3.7196228809997025`*^9, 
   3.7196229038124104`*^9}, {3.719773624383868*^9, 3.7197736245088606`*^9}, {
   3.7208092997367315`*^9, 3.7208092997367315`*^9}, {3.7208096046276426`*^9, 
   3.7208096050651493`*^9}, {3.7208591794935884`*^9, 
   3.7208591819154825`*^9}, {3.720870138698891*^9, 3.720870275387494*^9}, {
   3.720870426998068*^9, 3.72087043706066*^9}, {3.720870682089892*^9, 
   3.7208707421841035`*^9}, {3.7208710914681425`*^9, 
   3.7208710917962694`*^9}, {3.7208892420101304`*^9, 3.720889252133763*^9}, {
   3.7220971600091763`*^9, 3.7220971912438555`*^9}, {3.722098555399428*^9, 
   3.722098558055688*^9}, {3.722098707760352*^9, 3.722098707916614*^9}, {
   3.722219484131378*^9, 3.7222194852095313`*^9}, {3.7222203491811304`*^9, 
   3.7222203665250454`*^9}, 3.7222530051381054`*^9, {3.745025342097187*^9, 
   3.7450253677359924`*^9}, {3.745025458566764*^9, 3.745025482743759*^9}, {
   3.745026212894496*^9, 3.745026223659358*^9}, {3.7506090423203163`*^9, 
   3.750609051085355*^9}, {3.750610949063984*^9, 3.7506109600787964`*^9}, {
   3.750611038119953*^9, 3.7506110631649427`*^9}, {3.750611348188038*^9, 
   3.750611353203293*^9}, {3.750611415948238*^9, 
   3.750611434337488*^9}},ExpressionUUID->"46d625a3-c9fc-4ac7-a547-\
4d99c913cf25"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Model", "Section",
 CellChangeTimes->{{3.669631812504639*^9, 3.669631819769997*^9}, {
  3.6697210032317576`*^9, 3.6697210049036465`*^9}, {3.6697580388066244`*^9, 
  3.6697580398473396`*^9}, {3.6811438602412176`*^9, 
  3.681143862046855*^9}},ExpressionUUID->"3d88ca90-5e6c-499a-8475-\
54139088fd80"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"MarloRBD", "[", "\"\<torso\>\"", "]"}], "  ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "side", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{"MarloRBD", "@", 
       RowBox[{"data", "\[LeftDoubleBracket]", 
        RowBox[{"1", ";;", "1"}], "\[RightDoubleBracket]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"MarloRBD", "[", "s_String", "]"}], "  ", ":=", " ", 
    RowBox[{"Module", "[", 
     RowBox[{
      RowBox[{"{", "side", "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"side", " ", "=", " ", 
        RowBox[{"data", "\[LeftDoubleBracket]", 
         RowBox[{"2", ";;"}], "\[RightDoubleBracket]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"side", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], " ", "=", 
        " ", 
        RowBox[{
         RowBox[{
          RowBox[{"s", " ", "<>", " ", "\"\<_\>\"", " ", "<>", " ", "#"}], 
          "&"}], " ", "/@", " ", 
         RowBox[{"side", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}]}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{"StringMatchQ", "[", 
          RowBox[{"s", ",", " ", "\"\<left\>\""}], "]"}], ",", " ", 
         RowBox[{
          RowBox[{"side", "\[LeftDoubleBracket]", 
           RowBox[{"All", ",", " ", "2"}], "\[RightDoubleBracket]"}], " ", 
          "=", " ", 
          RowBox[{"-", 
           RowBox[{"side", "\[LeftDoubleBracket]", 
            RowBox[{"All", ",", " ", "2"}], "\[RightDoubleBracket]"}]}]}]}], 
        "]"}], ";", "\[IndentingNewLine]", 
       RowBox[{"MarloRBD", "@", "side"}]}]}], "\[IndentingNewLine]", "]"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"MarloRBD", "[", "B_", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "data", ",", " ", "b", ",", " ", "pre", ",", " ", "n", ",", " ", "p", 
       ",", "  ", "s", ",", " ", "f", ",", " ", "I"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"data", " ", "=", " ", 
       RowBox[{"AssociationThread", "[", 
        RowBox[{
         RowBox[{"B", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], " ", 
         "\[Rule]", " ", 
         RowBox[{"B", "\[LeftDoubleBracket]", 
          RowBox[{"All", ",", " ", 
           RowBox[{"2", ";;", "4"}]}], "\[RightDoubleBracket]"}]}], "]"}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"n", " ", "=", " ", 
          RowBox[{
          "b", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"f", " ", "=", " ", 
          RowBox[{"N", "@", 
           RowBox[{"{", 
            RowBox[{"0", ",", " ", "0", ",", " ", "0"}], "}"}]}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"I", " ", "=", " ", 
          RowBox[{"Flatten", "@", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{
             "b", "\[LeftDoubleBracket]", "5", "\[RightDoubleBracket]"}], ",",
              " ", "f", ",", " ", 
             RowBox[{"b", "\[LeftDoubleBracket]", 
              RowBox[{"6", ";;", "17"}], "\[RightDoubleBracket]"}]}], 
            "}"}]}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"s", " ", "=", " ", 
          RowBox[{"Which", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<torso\>\""}], "]"}], ",", " ", 
            "\"\<fb-marlo\>\"", ",", "\[IndentingNewLine]", 
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<hip\>\""}], "]"}], ",", " ", 
            "\"\<ry\>\"", ",", "\[IndentingNewLine]", "True", ",", " ", 
            "\"\<rx\>\""}], "\[IndentingNewLine]", "]"}]}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"pre", " ", "=", " ", 
          RowBox[{"Which", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<left\>\""}], "]"}], ",", " ", 
            "\"\<left_\>\"", ",", "\[IndentingNewLine]", 
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<right\>\""}], "]"}], ",", " ", 
            "\"\<right_\>\"", ",", "\[IndentingNewLine]", "True", ",", " ", 
            "\"\<\>\""}], "\[IndentingNewLine]", "]"}]}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"p", ",", " ", "f"}], "}"}], " ", "=", " ", 
          RowBox[{"Which", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<torso\>\""}], "]"}], ",", " ", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"Root", ",", " ", 
              RowBox[{"Join", "[", 
               RowBox[{"f", " ", ",", "f"}], "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<hip\>\""}], "]"}], ",", " ", 
            "\[IndentingNewLine]", 
            RowBox[{"{", 
             RowBox[{"\"\<torso\>\"", ",", " ", 
              RowBox[{"Join", "[", 
               RowBox[{"f", " ", ",", "f"}], "]"}]}], "}"}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<lower_leg\>\""}], "]"}], ",", " ", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"pre", " ", "=", " ", 
              RowBox[{"pre", " ", "<>", "\"\<thigh\>\""}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"pre", ",", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"f", ",", " ", 
                 RowBox[{"data", "[", "pre", "]"}]}], "]"}]}], "}"}]}], ",", 
            "\[IndentingNewLine]", 
            RowBox[{"StringContainsQ", "[", 
             RowBox[{"n", ",", " ", "\"\<four_bar_link\>\""}], "]"}], ",", 
            " ", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"pre", " ", "=", " ", 
              RowBox[{"pre", " ", "<>", " ", "\"\<shin\>\""}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"pre", ",", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"f", ",", " ", 
                 RowBox[{"data", "[", "pre", "]"}]}], "]"}]}], "}"}]}], ",", 
            "\[IndentingNewLine]", "True", ",", " ", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"pre", " ", "=", " ", 
              RowBox[{"pre", " ", "<>", " ", "\"\<hip\>\""}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"{", 
              RowBox[{"pre", ",", " ", 
               RowBox[{"Join", "[", 
                RowBox[{"f", ",", " ", 
                 RowBox[{"data", "[", "pre", "]"}]}], "]"}]}], "}"}]}]}], 
           "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
         "\[IndentingNewLine]", 
         RowBox[{"Flatten", "@", 
          RowBox[{"{", 
           RowBox[{
           "n", ",", " ", "p", ",", " ", "s", ",", " ", "f", ",", " ", "I"}], 
           "}"}]}]}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"b", ",", " ", "B"}], "}"}]}], "\[IndentingNewLine]", 
       "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]"}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7167357637328014`*^9, 3.716735763795287*^9}, {
   3.7168991439522505`*^9, 3.7168991443741274`*^9}, {3.744240148292042*^9, 
   3.7442401491357317`*^9}, {3.7442459986039567`*^9, 
   3.7442460196043034`*^9}, {3.7443341371812773`*^9, 3.7443341386186714`*^9}, 
   3.744424132680746*^9, {3.744453680829526*^9, 3.744453681595128*^9}, {
   3.7693268860690327`*^9, 3.7693268862408953`*^9}, {3.7693270060423803`*^9, 
   3.7693270086928606`*^9}, {3.769327123329132*^9, 
   3.769327123766636*^9}},ExpressionUUID->"6ef0c805-52a3-4843-b014-\
c4991259c8b2"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"CreateModelData", "[", "]"}], " ", ":=", " ", 
   RowBox[{"Module", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "R", ",", " ", "torso", ",", " ", "right", ",", " ", "left", ",", " ", 
       "poi"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "name", ",", " ", "poi", ",", " ", "mass", ",", " ", "com", ",", " ", 
       "I"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{"drop", " ", "header", " ", "in", " ", "first", " ", "row"}], 
      " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"data", " ", "=", " ", 
       RowBox[{
        RowBox[{"Import", "[", "\"\<Marlo/marlo-dat.csv\>\"", "]"}], 
        "\[LeftDoubleBracket]", 
        RowBox[{"2", ";;"}], "\[RightDoubleBracket]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"R", " ", "=", " ", 
       RowBox[{"RotationMatrix", "[", 
        RowBox[{"\[Pi]", ",", " ", 
         RowBox[{"{", 
          RowBox[{"0", ",", " ", "1", ",", " ", "0"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"data", "\[LeftDoubleBracket]", 
        RowBox[{
         RowBox[{"3", ";;"}], ",", " ", 
         RowBox[{"2", ";;", "4"}]}], "\[RightDoubleBracket]"}], " ", "=", " ", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"R", ".", 
          RowBox[{
           RowBox[{"data", "\[LeftDoubleBracket]", 
            RowBox[{
             RowBox[{"3", ";;"}], ",", " ", 
             RowBox[{"2", ";;", "4"}]}], "\[RightDoubleBracket]"}], 
           "\[Transpose]"}]}], ")"}], "\[Transpose]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"data", "\[LeftDoubleBracket]", 
        RowBox[{
         RowBox[{"3", ";;"}], ",", " ", 
         RowBox[{"6", ";;", "8"}]}], "\[RightDoubleBracket]"}], " ", "=", " ", 
       RowBox[{
        RowBox[{"(", 
         RowBox[{"R", ".", 
          RowBox[{
           RowBox[{"data", "\[LeftDoubleBracket]", 
            RowBox[{
             RowBox[{"3", ";;"}], ",", " ", 
             RowBox[{"6", ";;", "8"}]}], "\[RightDoubleBracket]"}], 
           "\[Transpose]"}]}], ")"}], "\[Transpose]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"RBDJoint", "[", 
       RowBox[{"\"\<fb-marlo\>\"", ",", " ", 
        RowBox[{"{", 
         RowBox[{
         "\"\<px\>\"", ",", " ", "\"\<py\>\"", ",", " ", "\"\<pz\>\"", ",", 
          " ", "\"\<rz\>\"", ",", " ", "\"\<ry\>\"", ",", " ", "\"\<rx\>\""}],
          "}"}]}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"torso", " ", "=", " ", 
       RowBox[{"data", "\[LeftDoubleBracket]", 
        RowBox[{"{", "1", "}"}], "\[RightDoubleBracket]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"right", " ", "=", " ", 
       RowBox[{"left", " ", "=", " ", 
        RowBox[{"data", "\[LeftDoubleBracket]", 
         RowBox[{"2", ";;"}], "\[RightDoubleBracket]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"right", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], " ", "=", 
       " ", 
       RowBox[{
        RowBox[{
         RowBox[{"\"\<right_\>\"", " ", "<>", " ", "#"}], "&"}], " ", "/@", 
        " ", 
        RowBox[{"right", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"left", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}], " ", "=", 
       " ", 
       RowBox[{
        RowBox[{
         RowBox[{"\"\<left_\>\"", " ", "<>", " ", "#"}], "&"}], " ", "/@", 
        " ", 
        RowBox[{"left", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", "1"}], "\[RightDoubleBracket]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"left", "\[LeftDoubleBracket]", 
        RowBox[{"All", ",", " ", "2"}], "\[RightDoubleBracket]"}], " ", "=", 
       " ", 
       RowBox[{"-", 
        RowBox[{"left", "\[LeftDoubleBracket]", 
         RowBox[{"All", ",", " ", "2"}], "\[RightDoubleBracket]"}]}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"torso", " ", "=", " ", 
       RowBox[{"MarloRBD", "[", "\"\<torso\>\"", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"left", " ", "=", " ", 
       RowBox[{"MarloRBD", "[", "\"\<left\>\"", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"right", " ", "=", " ", 
       RowBox[{"MarloRBD", "[", "\"\<right\>\"", "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"poi", " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"{", 
          RowBox[{
           RowBox[{
           "#", "\[LeftDoubleBracket]", "1", "\[RightDoubleBracket]"}], ",", 
           " ", 
           RowBox[{"#", "\[LeftDoubleBracket]", 
            RowBox[{"2", ";;", "4"}], "\[RightDoubleBracket]"}]}], "}"}], 
         "&"}], " ", "/@", " ", 
        RowBox[{"data", "\[LeftDoubleBracket]", 
         RowBox[{"{", 
          RowBox[{
          "1", ",", " ", "7", ",", " ", "8", ",", " ", "7", ",", " ", "8"}], 
          "}"}], "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"poi", "\[LeftDoubleBracket]", 
        RowBox[{
         RowBox[{"2", ";;", "3"}], ",", " ", "1"}], "\[RightDoubleBracket]"}],
        " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"\"\<left_\>\"", " ", "<>", " ", "#"}], "&"}], " ", "/@", 
        " ", 
        RowBox[{"poi", "\[LeftDoubleBracket]", 
         RowBox[{
          RowBox[{"2", ";;", "3"}], ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"poi", "\[LeftDoubleBracket]", 
        RowBox[{
         RowBox[{"4", ";;", "5"}], ",", " ", "1"}], "\[RightDoubleBracket]"}],
        " ", "=", " ", 
       RowBox[{
        RowBox[{
         RowBox[{"\"\<right_\>\"", " ", "<>", " ", "#"}], "&"}], " ", "/@", 
        " ", 
        RowBox[{"poi", "\[LeftDoubleBracket]", 
         RowBox[{
          RowBox[{"4", ";;", "5"}], ",", " ", "1"}], 
         "\[RightDoubleBracket]"}]}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Join", "[", 
         RowBox[{"torso", ",", " ", "left", ",", " ", "right"}], "]"}], ",", 
        " ", "poi", ",", " ", 
        RowBox[{"poi", "\[LeftDoubleBracket]", 
         RowBox[{"{", 
          RowBox[{"3", ",", "5"}], "}"}], "\[RightDoubleBracket]"}]}], 
       "}"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}]], "Input",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True,
 CellChangeTimes->{
  3.686497571900708*^9, {3.686675688180134*^9, 3.6866756897426963`*^9}, {
   3.68690429696815*^9, 3.6869043835372705`*^9}, {3.686905218434133*^9, 
   3.6869052188950553`*^9}, 3.686905252375483*^9, {3.6869097901643076`*^9, 
   3.686909792727713*^9}, {3.6869102443183002`*^9, 3.6869102540618744`*^9}, {
   3.6869125019677944`*^9, 3.6869125055459366`*^9}, {3.6869239392377157`*^9, 
   3.686924011915967*^9}, {3.686926970402849*^9, 3.6869269892623835`*^9}, {
   3.6869299680021043`*^9, 3.6869299695103693`*^9}, {3.686930032183214*^9, 
   3.686930310107628*^9}, {3.6869308975558386`*^9, 3.6869309055453477`*^9}, {
   3.6869320002382984`*^9, 3.6869320033299637`*^9}, {3.6869343196698227`*^9, 
   3.686934422643592*^9}, {3.686937289280371*^9, 3.6869372918433175`*^9}, {
   3.6869387933722844`*^9, 3.6869388412252665`*^9}, {3.68693889789697*^9, 
   3.686938898991895*^9}, {3.686939919080305*^9, 3.686939921045253*^9}, 
   3.686945167841029*^9, 3.686945301940242*^9, {3.686947247176408*^9, 
   3.6869472532546244`*^9}, 3.686947413350566*^9, {3.686961395375459*^9, 
   3.6869613968785334`*^9}, {3.686962176876954*^9, 3.6869621886556644`*^9}, {
   3.686964028387692*^9, 3.6869640288784122`*^9}, {3.6869640767065773`*^9, 
   3.6869640953602552`*^9}, 3.68696598428596*^9, 3.6869687116886826`*^9, {
   3.686996908320383*^9, 3.686996975400404*^9}, {3.686997197827077*^9, 
   3.686997201531234*^9}, {3.6869975006080384`*^9, 3.686997504603813*^9}, 
   3.6869989579270716`*^9, 3.6869990156821313`*^9, {3.6869990515822053`*^9, 
   3.6869990708831205`*^9}, {3.6870009963687873`*^9, 3.687001028643362*^9}, {
   3.6870024868147984`*^9, 3.6870024898793907`*^9}, {3.6870025271888895`*^9, 
   3.687002557877756*^9}, {3.6870026153730783`*^9, 3.687002629482045*^9}, {
   3.6870055640104256`*^9, 3.6870056103234625`*^9}, {3.6870056947876835`*^9, 
   3.6870057001681957`*^9}, {3.6870057442970505`*^9, 3.687005765870908*^9}, {
   3.6870058316495447`*^9, 3.6870058363378534`*^9}, 3.687006214349547*^9, {
   3.6870063556965246`*^9, 3.6870063752046194`*^9}, {3.6870070473957663`*^9, 
   3.687007048286457*^9}, {3.687007086067977*^9, 3.6870070883180027`*^9}, {
   3.6870072125078096`*^9, 3.6870072162521267`*^9}, 3.691156906755774*^9, {
   3.6961698576790323`*^9, 3.6961698580696774`*^9}, {3.696170627744453*^9, 
   3.696170662046421*^9}, 3.6961751404487066`*^9, {3.6961754422056174`*^9, 
   3.696175453930829*^9}, 3.696175602181411*^9, {3.6961758954524655`*^9, 
   3.6961759191870475`*^9}, {3.6961761222669477`*^9, 3.696176140235854*^9}, 
   3.696176173470521*^9, {3.69617622583037*^9, 3.6961762849182673`*^9}, {
   3.696176489027439*^9, 3.6961765024071145`*^9}, {3.6961770602785053`*^9, 
   3.696177063012887*^9}, {3.69617709893429*^9, 3.696177160686465*^9}, {
   3.6961772128025227`*^9, 3.696177231561181*^9}, {3.6961773438669043`*^9, 
   3.696177345266987*^9}, {3.6961774016399717`*^9, 3.696177403014965*^9}, {
   3.6961778479441223`*^9, 3.6961778543973036`*^9}, {3.696249060967733*^9, 
   3.6962490619664383`*^9}, 3.696263540913381*^9, {3.6962637022631087`*^9, 
   3.6962637098659906`*^9}, {3.696266538395238*^9, 3.696266545071957*^9}, {
   3.6962668772052507`*^9, 3.6962671299633007`*^9}, 3.696267799846052*^9, {
   3.6966006195901365`*^9, 3.6966006260589433`*^9}, 3.696600879142164*^9, {
   3.697037399911669*^9, 3.6970374005366364`*^9}, {3.6970375484210553`*^9, 
   3.697037600306781*^9}, {3.697037643740431*^9, 3.6970376440529327`*^9}, {
   3.697037908143134*^9, 3.6970379430415726`*^9}, 3.6970380894816837`*^9, {
   3.6970381773851643`*^9, 3.6970381855274305`*^9}, 3.6970384643870163`*^9, {
   3.6970401756720257`*^9, 3.697040175749092*^9}, {3.6970418057019773`*^9, 
   3.697041891808298*^9}, {3.6970420217858324`*^9, 3.69704207899965*^9}, 
   3.697042319175193*^9, {3.6970444965450916`*^9, 3.697044497966984*^9}, {
   3.697128371764984*^9, 3.6971284476094294`*^9}, {3.697128663551036*^9, 
   3.697128729352352*^9}, {3.6971297849772577`*^9, 3.6971298088501854`*^9}, {
   3.6971298583423443`*^9, 3.6971298638467617`*^9}, {3.6971302176622934`*^9, 
   3.697130222075632*^9}, {3.697130325797695*^9, 3.697130328373502*^9}, {
   3.69714124913454*^9, 3.6971412509314847`*^9}, {3.6971956666335*^9, 
   3.697195667586592*^9}, {3.697195753039445*^9, 3.697195775531403*^9}, 
   3.7166906781695776`*^9, {3.7166908170927205`*^9, 3.7166908699525776`*^9}, {
   3.7166909283749866`*^9, 3.716690930187502*^9}, {3.7166909761879225`*^9, 
   3.7166910002159395`*^9}, 3.716691233296174*^9, {3.7166914765640187`*^9, 
   3.716691477657796*^9}, {3.7166915140487366`*^9, 3.716691579486834*^9}, {
   3.7167351118356323`*^9, 3.716735139132743*^9}, 3.7167351916488185`*^9, {
   3.716735236758587*^9, 3.716735244164902*^9}, {3.7167356067470365`*^9, 
   3.716735632262885*^9}, {3.716735703607259*^9, 3.7167357270293393`*^9}, {
   3.7167357739984994`*^9, 3.716735792967414*^9}, 3.7167361889419746`*^9, {
   3.7167363913968716`*^9, 3.7167364297878323`*^9}, 3.7167366857796555`*^9, 
   3.716736745155177*^9, 3.7167367815304937`*^9, {3.71673686810297*^9, 
   3.716736877134281*^9}, 3.7167369162283726`*^9, {3.7167369744476323`*^9, 
   3.716736974713259*^9}, {3.716744403483395*^9, 3.7167444117803583`*^9}, {
   3.7167444535463333`*^9, 3.716744462968292*^9}, {3.716744506093668*^9, 
   3.7167445100155773`*^9}, {3.716744588344387*^9, 3.7167446469230223`*^9}, 
   3.7167446846577272`*^9, 3.716745221019189*^9, 3.7167457560486746`*^9, {
   3.716746306910636*^9, 3.7167463363640175`*^9}, 3.7167463840170975`*^9, {
   3.7167465280496035`*^9, 3.7167465404716005`*^9}, 3.716769168829729*^9, 
   3.7167692067519217`*^9, {3.716772231111723*^9, 3.716772232252355*^9}, {
   3.716772265362008*^9, 3.716772268440159*^9}, {3.716772318549952*^9, 
   3.7167723358469877`*^9}, 3.716808696206603*^9, {3.716810356731874*^9, 
   3.716810364628942*^9}, {3.716815887388707*^9, 3.716815890904359*^9}, 
   3.7168162958378563`*^9, {3.7168339281877356`*^9, 3.7168339378127966`*^9}, 
   3.7168475114972334`*^9, 3.7168475474487867`*^9, {3.7168476028893213`*^9, 
   3.716847606837701*^9}, {3.71684766805997*^9, 3.7168476939866915`*^9}, {
   3.7168591717027245`*^9, 3.716859174849184*^9}, {3.716860184419391*^9, 
   3.71686018487221*^9}, {3.7168603486455865`*^9, 3.7168603983120594`*^9}, {
   3.7168605245351734`*^9, 3.716860543172484*^9}, {3.7168605806781855`*^9, 
   3.7168606230379343`*^9}, {3.7168608856287265`*^9, 3.716860902053406*^9}, 
   3.716894899728318*^9, {3.7168962107797136`*^9, 3.716896248998756*^9}, {
   3.7168970431963177`*^9, 3.716897096821727*^9}, {3.7168972628545732`*^9, 
   3.716897290995427*^9}, {3.716897536694827*^9, 3.716897545726141*^9}, 
   3.7168977167701836`*^9, 3.716899126233365*^9, 3.716904730063922*^9, {
   3.7169047660798197`*^9, 3.716904771048606*^9}, {3.7169070110739183`*^9, 
   3.7169070624180565`*^9}, 3.7222186288852253`*^9, {3.7222193820054073`*^9, 
   3.7222193967243*^9}, {3.722219565598235*^9, 3.7222196067236247`*^9}, {
   3.7222201872254424`*^9, 3.7222202059453945`*^9}, {3.7222202407894754`*^9, 
   3.722220344368602*^9}, {3.722252836223816*^9, 3.7222528395988474`*^9}, {
   3.722253053794816*^9, 3.722253060373004*^9}, {3.7222549959211626`*^9, 
   3.722255021124511*^9}, {3.7222550524373083`*^9, 3.7222550604686346`*^9}, {
   3.7442399159865236`*^9, 3.7442399985585585`*^9}, {3.744240134449312*^9, 
   3.744240136667899*^9}, {3.74424125345816*^9, 3.744241253630024*^9}, {
   3.7443341319472876`*^9, 3.7443341549924817`*^9}, {3.7444536530190616`*^9, 
   3.7444536551595335`*^9}, {3.7450253751104317`*^9, 
   3.7450253820474253`*^9}, {3.750611408339469*^9, 
   3.7506114111360917`*^9}},ExpressionUUID->"6cf5fdca-24e3-406b-9e58-\
c32b5de15902"]
}, Open  ]],

Cell[CellGroupData[{

Cell["End Package", "Section",
 InitializationCell->True,
 CellChangeTimes->{{3.5914870039053636`*^9, 3.591487004222381*^9}, {
  3.672922910157816*^9, 
  3.6729229104546924`*^9}},ExpressionUUID->"89ca9acb-4053-4b62-ae07-\
011985e5c6d0"],

Cell[BoxData[{
 RowBox[{"End", "[", "]"}], "\n", 
 RowBox[{"EndPackage", "[", "]"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.6729231090809507`*^9, 
  3.6729231097997046`*^9}},ExpressionUUID->"4658df9e-a842-4ee0-aa85-\
339f6974490e"]
}, Open  ]]
},
AutoGeneratedPackage->Automatic,
WindowSize->{1373, 1509},
WindowMargins->{{0, Automatic}, {0, Automatic}},
Magnification:>2. Inherited,
FrontEndVersion->"11.3 for Linux x86 (64-bit) (March 6, 2018)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[580, 22, 160, 3, 136, "Section",ExpressionUUID->"3d38ec39-23f1-4d22-b57d-1df458897f8c"],
Cell[743, 27, 4877, 76, 378, "Input",ExpressionUUID->"46d625a3-c9fc-4ac7-a547-4d99c913cf25",
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[5657, 108, 304, 5, 136, "Section",ExpressionUUID->"3d88ca90-5e6c-499a-8475-54139088fd80"],
Cell[5964, 115, 8515, 191, 2493, "Input",ExpressionUUID->"6ef0c805-52a3-4843-b014-c4991259c8b2",
 InitializationCell->True],
Cell[14482, 308, 14466, 271, 1116, "Input",ExpressionUUID->"6cf5fdca-24e3-406b-9e58-c32b5de15902",
 CellGroupingRules->{GroupTogetherGrouping, 10000.},
 InitializationCell->True]
}, Open  ]],
Cell[CellGroupData[{
Cell[28985, 584, 236, 5, 134, "Section",ExpressionUUID->"89ca9acb-4053-4b62-ae07-011985e5c6d0",
 InitializationCell->True],
Cell[29224, 591, 252, 6, 128, "Input",ExpressionUUID->"4658df9e-a842-4ee0-aa85-339f6974490e",
 InitializationCell->True]
}, Open  ]]
}
]
*)

